{
    "blocks": [],
    "contracts": [
        {
            "Name": "supplychains_cargos_add",
            "Value": "contract supplychains_cargos_add{\n    data {\n        cargo_id int\n        supplier_id int\n        cargo_name string\n        cargo_type int\n        cargo_weight int\n    }\n\n    conditions {\n        $qr_code_text = \"Name=\" + Str($cargo_name) + \";Type=\" + Str($cargo_type) + \";Weight=\" + Str($cargo_weight)\n    }\n\n    action {\n        if ($cargo_id == 0) {\n            DBInsert(\"supplychains_cargos\", \"name,cargo_type,weight,qr_code,supplier_id,btn_block,delete\", \n                $cargo_name, $cargo_type, $cargo_weight, $qr_code_text, $supplier_id, 0, 0)\n        } else {\n            DBUpdate(\"supplychains_cargos\", $cargo_id, \"name,cargo_type,weight,qr_code\", $cargo_name, $cargo_type, $cargo_weight, $qr_code_text)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_cargos_del",
            "Value": "contract supplychains_cargos_del {\n    data {\n        cargo_id int\n    }\n\n    conditions {}\n\n    action {\n        DBUpdate(\"supplychains_cargos\", $cargo_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_cargos_movement",
            "Value": "contract supplychains_cargos_movement {\n    data {\n        cargo_id int\n        step_id int\n    }\n\n    conditions {\n\t\t$cargo_map = DBFind(\"supplychains_cargos\").Where(\"id=?\", $cargo_id).Row()\n        if !$cargo_map {\n            warning \"Cargo not found\"\n        }\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"id=?\", $step_id).Row()\n        if !$step_map {\n            warning \"Step not found\"\n        }\n\n        $receiver_signature = $step_map[\"receiver_signature\"]\n        $receiver_type = $step_map[\"receiver_type\"]\n        $receiver_id = $step_map[\"receiver_id\"]\n    }   \n\n    action {\n        var supplier_id int\n        var transport_id int\n        var warehouse_id int\n        var recipient_id int\n\n        if (Int($receiver_signature) != 0){\n\n            if(Int($receiver_type) == 1){\n                supplier_id = Int($receiver_id)\n            }\n            if(Int($receiver_type) == 2){\n                transport_id = Int($receiver_id)\n            }\n            if(Int($receiver_type) == 3){\n                warehouse_id = Int($receiver_id)\n            }\n            if(Int($receiver_type) == 4){\n                recipient_id = Int($receiver_id)\n            }\n\n            DBUpdate(\"supplychains_cargos\", $cargo_id, \"supplier_id,transport_id,warehouse_id,recipient_id\", supplier_id, transport_id, warehouse_id, recipient_id)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_delete",
            "Value": "contract supplychains_delete {\n    data {\n        supply_id int\n    }\n\n    conditions {\n\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", $supply_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_recipient_point",
            "Value": "contract supplychains_recipient_point {\n    data {\n        cargo_id int\n    }\n\n    conditions {\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"cargo_id=?\", $cargo_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n\n        $step = Int($supply_map[\"step\"])\n        $step = $step + 1\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"supply_id=? and step=?\", Int($supply_map[\"id\"]), $step).Row()\n        if !$step_map {\n            warning \"Step not found\"\n        }\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", Int($supply_map[\"id\"]), \"total_steps, status, step\", $step + 1, 2, 0)\n\n        DBUpdate(\"supplychains_steps\", Int($step_map[\"id\"]), \"receiver_id,receiver_name,receiver_role_id,receiver_type\",\n            Int($supply_map[\"recipient_id\"]), Str($supply_map[\"recipient_name\"]), Int($supply_map[\"recipient_role_id\"]), 4)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_recipients_add",
            "Value": "contract supplychains_recipients_add {\n    data {\n        recipient_id int\n        recipient_name string\n        recipient_map string\n    }\n\n    conditions {\n        var map_data map\n        map_data = JSONToMap($recipient_map)\n\n        $recipient_map_coords = Str(map_data[\"coords\"])\n        $recipient_map_area = Float(map_data[\"area\"])\n        $recipient_map_address = Str(map_data[\"address\"])\n\n        if ($recipient_map_address == \"\") {\n            warning \"Area is zero. Select another site\"\n        }\n\n        if ($recipient_map_area == 0) {\n            warning \"Address is empty. Select another site or enter the address manually\"\n        }\n    }\n\n    action {\n        if ($recipient_id == 0) {\n            var role_id int\n            role_id = Roles_Create(\"role_name,role_type\", $recipient_name, 1)\n\n            DBInsert(\"supplychains_recipients\", \"name,address,area,recipient_map,role_id,delete,string_supply_id\",\n                $recipient_name, $recipient_map_address, $recipient_map_area, $recipient_map, role_id, 0, \"0\")\n        } else {\n            DBUpdate(\"supplychains_recipients\", $recipient_id, \"name,address,area,recipient_map\", $recipient_name, $recipient_map_address, $recipient_map_area, $recipient_map)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_recipients_del",
            "Value": "contract supplychains_recipients_del {\n    data {\n        recipient_id int\n    }\n\n    conditions {}\n\n    action {\n        DBUpdate(\"supplychains_recipients\", $recipient_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_send_notifics",
            "Value": "contract supplychains_send_notifics {\n    data {\n        supply_id int\n    }\n\n    conditions {\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"id=?\", $supply_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n\n        $step = Int($supply_map[\"step\"])\n        $total_steps = Int($supply_map[\"total_steps\"])\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"supply_id=? and step=?\", Int($supply_map[\"id\"]), $step).Row()\n        if !$step_map {\n            warning \"Step not found\"\n        }\n    }\n\n    action {\n        if ($step < $total_steps) {\n\n            $receiver_role_id = Int($step_map[\"receiver_role_id\"])\n            $holder_role_id = Int($step_map[\"holder_role_id\"])\n\n            var params string\n            params = \"cargo_id=\" + Str($supply_map[\"cargo_id\"]) + \",step_id=\" + Str($step_map[\"id\"])\n\n            Notifications_Roles_Send(\"role_id,closure_type,icon_name,text_header,text_body,page_name,params_val\",\n                $receiver_role_id, 2, \"fa-info-circle\", \"Supply Chain\", \"Requires your signature\", \"supplychains_sign\", params)\n\n            Notifications_Roles_Send(\"role_id,closure_type,icon_name,text_header,text_body,page_name,params_val\",\n                $holder_role_id, 2, \"fa-info-circle\", \"Supply Chain\", \"Requires your signature\", \"supplychains_sign\", params)\n        }\n    }\n\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_sign",
            "Value": "contract supplychains_sign {\n    data {\n        step_id int\n        vFlag int\n        photo string \"image\"\n        notific_id int\n    }\n\n    conditions {\n\t\t$supply_id = DBFind(\"supplychains_steps\").Where(\"id=?\", $step_id).One(\"supply_id\")\n        if !$supply_id {\n            warning \"Step not found\"\n        }\n\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"id=?\", Int($supply_id)).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n    }\n\n    action {\n\n        if ($vFlag == 1) {\n            DBUpdate(\"supplychains_steps\", $step_id, \"holder_signature, timestamp holder_date_signature\", $key_id, $block_time)\n        } else {\n            DBUpdate(\"supplychains_steps\", $step_id, \"receiver_signature, timestamp receiver_date_signature,photo\", $key_id, $block_time, $photo)\n        }\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"id=?\", $step_id).Row()\n        $holder_signature = Int($step_map[\"holder_signature\"])\n        $receiver_signature = Int($step_map[\"receiver_signature\"])\n\n        if ($holder_signature != 0 && $receiver_signature != 0) {\n\n            $step = Int($supply_map[\"step\"])\n            $total_steps = Int($supply_map[\"total_steps\"])\n\n            $step = $step + 1\n\n            if ($step >= $total_steps) {\n                DBUpdate(\"supplychains_supply\", Int($supply_id), \"step,status\", $step, 4)\n            } else {\n                DBUpdate(\"supplychains_supply\", Int($supply_id), \"step\", $step)\n                supplychains_send_notifics(\"supply_id\", Int($supply_id))\n            }\n        }\n\n        supplychains_cargos_movement(\"cargo_id,step_id\", Int($supply_map[\"cargo_id\"]), $step_id)\n\n        if ($notific_id > 0) {\n            Notifications_Single_Close(\"notific_id\", $notific_id)\n        }\n\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_start",
            "Value": "contract supplychains_start {\n    data {\n        cargo_id int\n    }\n\n    conditions {\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"cargo_id=?\", $cargo_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", Int($supply_map[\"id\"]), \"status\", 3)\n        supplychains_send_notifics(\"supply_id\", Int($supply_map[\"id\"]))\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_step_add",
            "Value": "contract supplychains_step_add {\n    data {\n        cargo_id int\n        transport_id int\n        warehouse_id int\n        param int\n    }\n\n    conditions {\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"cargo_id=?\", $cargo_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n\n        $step = Int($supply_map[\"step\"])\n        $step = $step + 1\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"supply_id=? and step=?\", Int($supply_map[\"id\"]), $step).Row()\n        if !$step_map {\n            warning \"Step not found\"\n        }\n\n        $var_id = 0\n        $var_name = \"\"\n        $var_role_id = 0;\n        $var_type = 0\n\n        if ($param == 1){\n            $transport_map = DBFind(\"supplychains_transport\").Where(\"id=?\", $transport_id).Row()\n            if !$transport_map {\n                warning \"Transport not found\"\n            }\n            $var_id = $transport_id\n            $var_name = Str($transport_map[\"name\"])\n            $var_role_id = Int($transport_map[\"role_id\"]);\n            $var_type = 2\n\t\t}\n\t\t\n        if ($param == 2){\n            $warehouse_map = DBFind(\"supplychains_warehouses\").Where(\"id=?\", $warehouse_id).Row()\n            if !$warehouse_map {\n                warning \"Warehouse not found\"\n            }\n            $var_id = $warehouse_id\n            $var_name = Str($warehouse_map[\"name\"])\n            $var_role_id = Int($warehouse_map[\"role_id\"]);\n            $var_type = 3\n        }\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", Int($supply_map[\"id\"]), \"step\", $step)\n\n        DBUpdate(\"supplychains_steps\", Int($step_map[\"id\"]), \"receiver_id,receiver_name,receiver_role_id,receiver_type\",\n            $var_id, $var_name, $var_role_id, $var_type)\n\n        $step = $step + 1\n        DBInsert(\"supplychains_steps\", \"supply_id, holder_id, holder_name, holder_type, holder_role_id, step\",\n            Int($supply_map[\"id\"]), $var_id, $var_name, $var_type, $var_role_id, $step)\n\n        if ($param == 1){\n            // add supply in transport\n            $string_supply_id = Str($transport_map[\"string_supply_id\"])\n            $string_supply_id = $string_supply_id + \",\" + Str(Int($supply_map[\"id\"]))\n            DBUpdate(\"supplychains_transport\", $transport_id, \"string_supply_id\", $string_supply_id)\n        }\n        if ($param == 2){\n            // add supply in warehouse\n            $string_supply_id = Str($warehouse_map[\"string_supply_id\"])\n            $string_supply_id = $string_supply_id + \",\" + Str(Int($supply_map[\"id\"]))\n            DBUpdate(\"supplychains_warehouses\", $warehouse_id, \"string_supply_id\", $string_supply_id)\n        }\n\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_suppliers_add",
            "Value": "contract supplychains_suppliers_add{\n    data {\n        supplier_id int\n        supplier_name string\n        supplier_type int\n        supplier_map string\n    }\n\n    conditions {\n        var map_data map\n        map_data = JSONToMap($supplier_map)\n\n        $supplier_map_coords = Str(map_data[\"coords\"])\n        $supplier_map_area = Float(map_data[\"area\"])\n        $supplier_map_address = Str(map_data[\"address\"])\n\n\t\tif ($supplier_map_address == \"\"){\n\t\t\twarning \"Area is zero. Select another site\"\n\t\t}\n\n\t\tif ($supplier_map_area == 0){\n\t\t\twarning \"Address is empty. Select another site or enter the address manually\"\n\t\t}\n    }\n\n    action {\n        if ($supplier_id == 0) {\n            var role_id int\n            role_id = Roles_Create(\"role_name,role_type\", $supplier_name, 1)\n            DBInsert(\"supplychains_suppliers\", \"name,supplier_type,role_id,area,address,supplier_map,delete,string_supply_id\", $supplier_name, $supplier_type, role_id, $supplier_map_area, $supplier_map_address, $supplier_map, 0, \"0\")\n        } else {\n            DBUpdate(\"supplychains_suppliers\", $supplier_id, \"name,supplier_type,area,address,supplier_map\", $supplier_name, $supplier_type, $supplier_map_area, $supplier_map_address, $supplier_map)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_suppliers_del",
            "Value": "contract supplychains_suppliers_del {\n    data {\n        supplier_id int\n    }\n\n    conditions {}\n\n    action {\n        DBUpdate(\"supplychains_suppliers\", $supplier_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_supply_add",
            "Value": "contract supplychains_supply_add {\n    data {\n        supplier_id int\n        cargo_id int\n    }\n\n    conditions {\n        $supplier_map = DBFind(\"supplychains_suppliers\").Where(\"id=?\", $supplier_id).Row()\n\t\tif ($supplier_map[\"id\"] == nil){\n\t\t\twarning \"Supplier not found\"\n\t\t}\n\n        $cargo_name = DBFind(\"supplychains_cargos\").Where(\"id=?\", $cargo_id).One(\"name\")\n\t\tif ($cargo_name == nil){\n\t\t\twarning \"Cargo not found\"\n\t\t}\n    }\n\n    action {\n        // create new supply\n        $supply_id = DBInsert(\"supplychains_supply\", \"timestamp date_create,supplier_id,supplier_name,cargo_id,cargo_name,status,step,delete\", \n            $block_time, $supplier_id, Str($supplier_map[\"name\"]), $cargo_id, $cargo_name, 0, -2, 0)\n\n        // add supply in supplier\n        $string_supply_id = Str($supplier_map[\"string_supply_id\"])\n        $string_supply_id = $string_supply_id + \",\" + Str($supply_id)\n        DBUpdate(\"supplychains_suppliers\", $supplier_id, \"string_supply_id\", $string_supply_id)\n\n        // blocked cargo\n        DBUpdate(\"supplychains_cargos\", $cargo_id, \"btn_block\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_supply_add_recipient",
            "Value": "contract supplychains_supply_add_recipient {\n    data {\n        cargo_id int\n\n        recipient_id int\n        date_dispatch string \"date\"\n        date_receipt string \"date\"\n    }\n\n    conditions {\n        $date_dispatch = $date_dispatch + \" 00:00\"\n        $date_receipt = $date_receipt + \" 00:00\"\n\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"cargo_id=?\", $cargo_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n\n        $recipient_map = DBFind(\"supplychains_recipients\").Where(\"id=?\", $recipient_id).Row()\n        if !$recipient_map {\n            warning \"Recipient not found\"\n        }\n\n        $supplier_map = DBFind(\"supplychains_suppliers\").Where(\"id=?\", $supply_map[\"supplier_id\"]).Row()\n        if !$supplier_map {\n            warning \"Supplier not found\"\n        }\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", Int($supply_map[\"id\"]), \"recipient_id,recipient_name,recipient_role_id,date_dispatch,date_receipt,step,status\",\n            $recipient_id, Str($recipient_map[\"name\"]), Int($recipient_map[\"role_id\"]), $date_dispatch, $date_receipt, -1, 1)\n\n        DBInsert(\"supplychains_steps\", \"supply_id,holder_id,holder_name,holder_type,holder_role_id,step\",\n            Int($supply_map[\"id\"]), Int($supply_map[\"supplier_id\"]), Str($supply_map[\"supplier_name\"]), 1, Int($supplier_map[\"role_id\"]), -1)\n\n        // add supply in recipient\n        $string_supply_id = Str($recipient_map[\"string_supply_id\"])\n        $string_supply_id = $string_supply_id + \",\" + Str(Int($supply_map[\"id\"]))\n        DBUpdate(\"supplychains_recipients\", $recipient_id, \"string_supply_id\", $string_supply_id)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_supply_add_transport",
            "Value": "contract supplychains_supply_add_transport {\n    data {\n        cargo_id int\n        transport_id int\n    }\n\n    conditions {\n        $supply_map = DBFind(\"supplychains_supply\").Where(\"cargo_id=?\", $cargo_id).Row()\n        if !$supply_map {\n            warning \"Supply not found\"\n        }\n\n        $transport_map = DBFind(\"supplychains_transport\").Where(\"id=?\", $transport_id).Row()\n        if !$transport_map {\n            warning \"Transport not found\"\n        }\n\n        $step_map = DBFind(\"supplychains_steps\").Where(\"supply_id=? and step=-1\", Int($supply_map[\"id\"])).Row()\n        if !$step_map {\n            warning \"Step not found\"\n        }\n    }\n\n    action {\n        DBUpdate(\"supplychains_supply\", Int($supply_map[\"id\"]), \"step\", 0)\n\n        DBUpdate(\"supplychains_steps\", Int($step_map[\"id\"]), \"step,receiver_id,receiver_name,receiver_role_id,receiver_type\",\n            0, $transport_id, Str($transport_map[\"name\"]), Int($transport_map[\"role_id\"]), 2)\n\n        DBInsert(\"supplychains_steps\", \"supply_id, holder_id, holder_name, holder_type, holder_role_id, step\",\n            Int($supply_map[\"id\"]), $transport_id, Str($transport_map[\"name\"]), 2, Int($transport_map[\"role_id\"]), 1)\n\n        // add supply in transport\n        $string_supply_id = Str($transport_map[\"string_supply_id\"])\n        $string_supply_id = $string_supply_id + \",\" + Str(Int($supply_map[\"id\"]))\n        DBUpdate(\"supplychains_transport\", $transport_id, \"string_supply_id\", $string_supply_id)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_transport_add",
            "Value": "contract supplychains_transport_add {\n    data {\n        transport_id int\n        transport_name string\n        type_transport int\n    }\n\n    conditions {}\n\n    action {\n        if ($transport_id == 0) {\n            $role_id = Roles_Create(\"role_name,role_type\", $transport_name, 1)\n            DBInsert(\"supplychains_transport\", \"name,type,role_id,delete,string_supply_id\", $transport_name, $type_transport, $role_id, 0, \"0\")\n        } else {\n            DBUpdate(\"supplychains_transport\", $transport_id, \"name,type\", $transport_name, $type_transport)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_transport_del",
            "Value": "contract supplychains_transport_del {\n    data {\n        transport_id int\n    }\n\n    conditions {}\n\n    action {\n        DBUpdate(\"supplychains_transport\", $transport_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_warehouses_add",
            "Value": "contract supplychains_warehouses_add {\n    data {\n        warehouse_id int\n        warehouse_name string\n        warehouse_map string\n    }\n\n    conditions {\n        var map_data map\n        map_data = JSONToMap($warehouse_map)\n\n        $warehouse_map_coords = Str(map_data[\"coords\"])\n        $warehouse_map_area = Float(map_data[\"area\"])\n        $warehouse_map_address = Str(map_data[\"address\"])\n\n        if ($warehouse_map_address == \"\") {\n            warning \"Area is zero. Select another site\"\n        }\n\n        if ($warehouse_map_area == 0) {\n            warning \"Address is empty. Select another site or enter the address manually\"\n        }\n    }\n\n    action {\n        if ($warehouse_id == 0) {\n            var role_id int\n            role_id = Roles_Create(\"role_name,role_type\", $warehouse_name, 1)\n\n            DBInsert(\"supplychains_warehouses\", \"name,address,area,warehouse_map,role_id,delete,string_supply_id\",\n                $warehouse_name, $warehouse_map_address, $warehouse_map_area, $warehouse_map, role_id, 0, \"0\")\n        } else {\n            DBUpdate(\"supplychains_warehouses\", $warehouse_id, \"name,address,area,warehouse_map\", $warehouse_name, $warehouse_map_address, $warehouse_map_area, $warehouse_map)\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_warehouses_del",
            "Value": "contract supplychains_warehouses_del {\n    data {\n        warehouse_id int\n    }\n\n    conditions {}\n\n    action {\n        DBUpdate(\"supplychains_warehouses\", $warehouse_id, \"delete\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "data": [],
    "languages": [
        {
            "Name": "add_cargo",
            "Conditions": "",
            "Trans": "{\"ru\":\"Добавить груз\",\"en\":\"Add cargo\"}"
        },
        {
            "Name": "add_supply",
            "Conditions": "",
            "Trans": "{\"en\":\"Add supply\",\"ru\":\"Добавить поставку\"}"
        },
        {
            "Name": "area",
            "Conditions": "",
            "Trans": "{\"ru\":\"Площадь\",\"en\":\"Area\"}"
        },
        {
            "Name": "cargo",
            "Conditions": "",
            "Trans": "{\"ru\":\"Груз\",\"en\":\"Cargo\"}"
        },
        {
            "Name": "cargo_type",
            "Conditions": "",
            "Trans": "{\"en\":\"Cargo type\",\"ru\":\"Тип груза\"}"
        },
        {
            "Name": "cargos",
            "Conditions": "",
            "Trans": "{\"ru\":\"Грузы\",\"en\":\"Cargos\"}"
        },
        {
            "Name": "create_recipient_company",
            "Conditions": "",
            "Trans": "{\"ru\":\"Добавить компанию-получателя\",\"en\":\"Add recipient company\"}"
        },
        {
            "Name": "create_supplier",
            "Conditions": "",
            "Trans": "{\"ru\":\"Добавить поставщика\",\"en\":\"Add supplier\"}"
        },
        {
            "Name": "create_supply_chain",
            "Conditions": "",
            "Trans": "{\"ru\":\"Создать цепочку поставок\",\"en\":\"Create Supply Chain\"}"
        },
        {
            "Name": "create_transport_company",
            "Conditions": "",
            "Trans": "{\"ru\":\"Добавить транспортную компанию\",\"en\":\"Add transport company\"}"
        },
        {
            "Name": "create_warehouse",
            "Conditions": "",
            "Trans": "{\"ru\":\"Добавить склад\",\"en\":\"Add warehouse\"}"
        },
        {
            "Name": "date_dispatch",
            "Conditions": "",
            "Trans": "{\"en\":\"Date dispatch\",\"ru\":\"Дата отправки\"}"
        },
        {
            "Name": "date_receipt",
            "Conditions": "",
            "Trans": "{\"en\":\"Date receipt\",\"ru\":\"Дата получения\"}"
        },
        {
            "Name": "dispatch_receipt",
            "Conditions": "",
            "Trans": "{\"en\":\"Dispatch / Receipt\",\"ru\":\"Отправка / Получение\"}"
        },
        {
            "Name": "finished_steps",
            "Conditions": "",
            "Trans": "{\"ru\":\"Завершено шагов\",\"en\":\"Finished steps\"}"
        },
        {
            "Name": "map",
            "Conditions": "",
            "Trans": "{\"ru\":\"Карта\",\"en\":\"Map\"}"
        },
        {
            "Name": "next_step",
            "Conditions": "",
            "Trans": "{\"en\":\"Next\",\"ru\":\"Далее\"}"
        },
        {
            "Name": "qr_code",
            "Conditions": "",
            "Trans": "{\"ru\":\"QR код\",\"en\":\"QR code\"}"
        },
        {
            "Name": "recipient_companies",
            "Conditions": "",
            "Trans": "{\"ru\":\"Компании получатели\",\"en\":\"Recipient companies\"}"
        },
        {
            "Name": "recipient_company_details",
            "Conditions": "",
            "Trans": "{\"ru\":\"Информация о компании-получателе\",\"en\":\"Recipient company details\"}"
        },
        {
            "Name": "recipient_photo",
            "Conditions": "",
            "Trans": "{\"en\":\"Recipient photo\",\"ru\":\"Фото получателя\"}"
        },
        {
            "Name": "recipient_point",
            "Conditions": "",
            "Trans": "{\"en\":\"Recipient point\",\"ru\":\"Точка получателя\"}"
        },
        {
            "Name": "start_supply_chain",
            "Conditions": "",
            "Trans": "{\"en\":\"Start supply chain\",\"ru\":\"Начать цепочку поставки\"}"
        },
        {
            "Name": "supplier",
            "Conditions": "",
            "Trans": "{\"ru\":\"Поставщик\",\"en\":\"Supplier\"}"
        },
        {
            "Name": "supplier_details",
            "Conditions": "",
            "Trans": "{\"ru\":\"Информация о поставщике\",\"en\":\"Supplier details\"}"
        },
        {
            "Name": "supplier_type",
            "Conditions": "",
            "Trans": "{\"ru\":\"Индустрия\",\"en\":\"Industry\"}"
        },
        {
            "Name": "suppliers",
            "Conditions": "",
            "Trans": "{\"en\":\"Supplier Companies\",\"ru\":\"Компании поставщики\"}"
        },
        {
            "Name": "supply",
            "Conditions": "",
            "Trans": "{\"ru\":\"Поставка\",\"en\":\"Supply\"}"
        },
        {
            "Name": "supply_chain",
            "Conditions": "",
            "Trans": "{\"ru\":\"Цепочка поставок\",\"en\":\"Supply Chain\"}"
        },
        {
            "Name": "supply_chain_not_created",
            "Conditions": "",
            "Trans": "{\"en\":\"Supply chain was not created for this cargo\",\"ru\":\"Для этого груза цепочка поставок еще не создана\"}"
        },
        {
            "Name": "supply_handed_over",
            "Conditions": "",
            "Trans": "{\"en\":\"Handed over\",\"ru\":\"Передал\"}"
        },
        {
            "Name": "supply_hide",
            "Conditions": "",
            "Trans": "{\"en\":\"HIDE\",\"ru\":\"СКРЫТЬ\"}"
        },
        {
            "Name": "supply_photo",
            "Conditions": "",
            "Trans": "{\"en\":\"PHOTO\",\"ru\":\"ФОТО\"}"
        },
        {
            "Name": "supply_successfully_signed",
            "Conditions": "",
            "Trans": "{\"en\":\"Successfully signed\",\"ru\":\"Успешно подписано\"}"
        },
        {
            "Name": "supply_taken_over",
            "Conditions": "",
            "Trans": "{\"en\":\"Taken over\",\"ru\":\"Получил\"}"
        },
        {
            "Name": "supply_your_signature",
            "Conditions": "",
            "Trans": "{\"en\":\"Your signature\",\"ru\":\"Ваша подпись\"}"
        },
        {
            "Name": "supplychain_plan",
            "Conditions": "",
            "Trans": "{\"ru\":\"Планирование цепочки поставок\",\"en\":\"Plan Supply Chain\"}"
        },
        {
            "Name": "total_steps",
            "Conditions": "",
            "Trans": "{\"ru\":\"Всего шагов\",\"en\":\"Total steps\"}"
        },
        {
            "Name": "transport_companies",
            "Conditions": "",
            "Trans": "{\"ru\":\"Транспортные компании\",\"en\":\"Transport companies\"}"
        },
        {
            "Name": "transport_company",
            "Conditions": "",
            "Trans": "{\"ru\":\"Транспортная компания\",\"en\":\"Transport company\"}"
        },
        {
            "Name": "transport_company_details",
            "Conditions": "",
            "Trans": "{\"ru\":\"Информация о транспортной компании\",\"en\":\"Transport company details\"}"
        },
        {
            "Name": "warehouse",
            "Conditions": "",
            "Trans": "{\"ru\":\"Склад\",\"en\":\"Warehouse\"}"
        },
        {
            "Name": "warehouse_details",
            "Conditions": "",
            "Trans": "{\"ru\":\"Информация о складе\",\"en\":\"Warehouse details\"}"
        },
        {
            "Name": "warehouses",
            "Conditions": "",
            "Trans": "{\"ru\":\"Склады\",\"en\":\"Warehouses\"}"
        },
        {
            "Name": "weight",
            "Conditions": "",
            "Trans": "{\"ru\":\"Вес\",\"en\":\"Weight\"}"
        }
    ],
    "menus": [
        {
            "Name": "default_menu",
            "Value": "MenuGroup(Title:$supply_chain$, Icon:\"fa icon-link\"){\r\n    MenuItem(Title:$supply_chain$, Page:supplychains_list, Icon:\"fa icon-link\")\r\n    MenuItem(Title:$suppliers$, Page:supplychains_suppliers, Icon:\"icon-share-alt\")\r\n    MenuItem(Title:$transport_companies$, Page:supplychains_transport, Icon:\"fa icon-anchor\")\r\n    MenuItem(Title:$warehouses$, Page:supplychains_warehouses, Icon:\"fa icon-layers\")\r\n    MenuItem(Title:$recipient_companies$, Page:supplychains_recipients, Icon:\"icon-basket-loaded\")\r\n}",
            "Conditions": "ContractAccess(\"@1EditMenu\")"
        }
    ],
    "pages": [
        {
            "Name": "supplychains_add_step1",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_supply_chain$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($supply_chain$, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_supply_chain$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\r\n                Form(){\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier){\r\n                                    Span(Body: LangRes(supplier))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tDBFind(supplychains_suppliers, src_suppliers).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\tSelect(Name: supplier, Source: src_suppliers, NameColumn: name, ValueColumn: id)\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n\t\t\t\t\t\t\tButton(Body: LangRes(next_step), Class: btn btn-primary, Page: supplychains_add_step2, PageParams: \"supplier_id=Val(supplier)\")\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_add_step2",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_supply_chain$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($supply_chain$, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_supply_chain$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\r\n                Form(){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_suppliers, src_suppliers).Where(\"id=#supplier_id#\").Vars(\"supplier\")\r\n\t\t\t\t\tDBFind(supplychains_cargos, src_cargos).Where(\"supplier_id=#supplier_id# and btn_block=0 and delete=0\")\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier){\r\n                                    Span(Body: LangRes(supplier))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mt-sm text-left){\r\n\t\t\t\t\t\t\t\tSpan(#supplier_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: cargo_id){\r\n                                    Span(Body: LangRes(cargo))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tSelect(Source: src_cargos, Name: cargo_id, NameColumn: name, ValueColumn: id)\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_add_step1)\r\n\t\t\t\t\t\t\tButton(Body: LangRes(create), Class: btn btn-primary, Contract: supplychains_supply_add, Params: \"supplier_id=#supplier_id#, cargo_id=Val(cargo_id)\", Page: supplychains_view, PageParams: \"cargo_id=Val(cargo_id)\")\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_cargos_add",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    DBFind(Name: supplychains_suppliers, Source: src_suppliers).Where(id=#supplier_id#).Vars(supplier)\r\n\r\n\tSetTitle($add_cargo$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($suppliers$, supplychains_suppliers)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n        LinkPage(#supplier_name#, supplychains_suppliers_view,, \"supplier_id=#supplier_id#\")\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $add_cargo$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(add_cargo))\r\n                Form(){\r\n\r\n\t\t\t\t\tInput(Name: supplier_id, Class: form-control hidden, Type: Number, Value: #supplier_id#)\r\n\t\t\t\t\tIf(#cargo_id#>0){\r\n\t\t\t\t\t\tInput(Name: cargo_id, Class: form-control hidden, Type: Number, Value: #cargo_id#)\r\n\t\t\t\t\t\tDBFind(Name: supplychains_cargos, Source: src_cargos).Where(id=#cargo_id#).Vars(prefix)\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tInput(Name: cargo_id, Class: form-control hidden, Type: Number, Value: 0)\r\n\t\t\t\t\t\tSetVar(Name: prefix_name, Value: \"\")\r\n\t\t\t\t\t\tSetVar(Name: prefix_cargo_type, Value: 1)\r\n\t\t\t\t\t\tSetVar(Name: prefix_weight, Value: 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: cargo_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: cargo_name, Class: form-control, Type: text, Value: #prefix_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: cargo_type){\r\n                                    Span(Body: LangRes(cargo_type))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t   EcosysParam(Name: supply_cargos, Source: src_cargo_type)\r\n\t\t\t\t\t\t\t   Select(Name: cargo_type, Source: src_cargo_type, NameColumn: name, ValueColumn: id, Value: #prefix_cargo_type#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: cargo_weight){\r\n                                    Span(Body: LangRes(weight))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: cargo_weight, Class: form-control, Type: Number, Value: #prefix_weight#)\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_suppliers_view, PageParams: \"supplier_id=#supplier_id#\")\r\n                            Button(Body: LangRes(save), Class: btn btn-primary, Page: supplychains_suppliers_view, PageParams: \"supplier_id=#supplier_id#\", Contract: supplychains_cargos_add)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_list",
            "Value": "Div(content-wrapper ){\r\n\r\n\tSetTitle($supply_chain$)\r\n\tDiv(breadcrumb){\r\n\t\tSpan(Class: text-muted, Body: $supply_chain$)\r\n\t}\r\n\r\n\tDBFind(Name: supplychains_supply, Source: src_supply).Where(\"delete=0\").Custom(custom_supplier){\r\n\t\tIf(#supplier_id#>0){\r\n\t\t\tSpan(Class: h5 text-bold, Body: #supplier_name#)\r\n\t\t}\t\r\n\t}.Custom(custom_recipient){\r\n\t\tIf(#recipient_id#>0){\r\n\t\t\tSpan(Class: h5 text-bold, Body: #recipient_name#)\r\n\t\t}\r\n\t}.Custom(custom_steps){\r\n\t\tIf(#status#>1){ \r\n\t\t\tSpan(Body: #step# / #total_steps#)\r\n\t\t}.Else{\r\n            Span(Body: --)\r\n        }\r\n\t}.Custom(custom_status){\r\n\t\tIf(#status#<1){\r\n\t\t\tDiv(Class: text-normal, Body: EcosysParam(supply_status, 1))\r\n\t\t}.ElseIf(#status#==1){\r\n\t\t\tDiv(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n\t\t}.ElseIf(#status#==2){\r\n\t\t\tDiv(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n\t\t}.ElseIf(#status#==3){\r\n\t\t\tDiv(Class: text-warning, Body: EcosysParam(supply_status, #status#))\r\n\t\t}.ElseIf(#status#==4){\r\n\t\t\tDiv(Class: text-success, Body: EcosysParam(supply_status, #status#))\r\n\t\t}\r\n\t}.Custom(custom_date){\r\n\t\tDiv(Body: DateTime(DateTime: #date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n\t\tDiv(Body: DateTime(DateTime: #date_receipt#, Format: \"DD.MM.YYYY\"))\r\n\t}.Custom(custom_delete){\r\n\t\tDiv(Class: pull-right){\r\n\t\t\tIf(EcosysParam(supply_admin_mode)==1){\r\n                Span(){ \r\n\t\t\t\t    Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_delete, Params: \"supply_id=#id#\", Page: supplychains_list).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                }.Style(margin-right: 20px;)\r\n            }\r\n\t\t\tButton(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-default)\r\n        }\r\n    }.Order(\"id\")\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=id,$supplier$=custom_supplier,$recipient$=custom_recipient,$cargo$=cargo_name,$dispatch_receipt$=custom_date,$finished_steps$=custom_steps,$status$=custom_status,=custom_delete\")\r\n            }\r\n\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_add_step1, Body: LangRes(create_supply_chain), Class: btn btn-primary)\r\n                }\r\n            }\r\n        }           \r\n    }\t\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_recipients",
            "Value": "Div(content-wrapper ){\r\n\r\n\tSetTitle($recipient_companies$)\r\n\tDiv(breadcrumb){\r\n\t\tSpan(Class: text-muted, Body: $recipient_companies$)\r\n\t}\r\n\r\n\tDBFind(supplychains_recipients, src_recipirents).Custom(custom_name){\r\n        LinkPage(Page: supplychains_recipients_view, PageParams: \"recipient_id=#id#\"){\r\n        \tSpan(Class: h5 text-bold, Body: #name#)\r\n\t\t}\t\r\n\t}.Custom(custom_map){\r\n\t\tDiv(){\r\n\t\t\tMap(MapType:hybrid, Hmap:80, Value:#recipient_map#)\r\n\t\t}.Style(width: 150px;)\r\n\t}.Custom(custom_edit){\r\n        Div(Class: pull-right){\r\n            If(EcosysParam(supply_admin_mode)==1){\r\n                Span(){ \r\n                    Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_recipients_del, Params: \"recipient_id=#id#\", Page: supplychains_recipients).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                }.Style(margin-right: 20px;)\r\n            }\r\n\t\t\tButton(Class: btn btn-default, Body: Em(Class:fa fa-2x icon-note), Page: supplychains_recipients_add, PageParams: \"recipient_id=#id#\")\r\n        }\r\n\t}.Where(\"delete=0\").Order(\"id\")\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_recipirents, Columns: \"$id$=id,$name$=custom_name,$map$=custom_map,$address$=address,=custom_edit\")\r\n            }\r\n\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n\t\t\t\t\tButton(Page: supplychains_recipients_add, Body: LangRes(add), Class: btn btn-primary)\r\n                }\r\n            }\r\n        }           \r\n    }\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_recipients_add",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_recipient_company$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($recipient_companies$, supplychains_recipients)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_recipient_company$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(create_recipient_company))\r\n                Form(){\r\n\r\n\t\t\t\t\tIf(#recipient_id#>0){\r\n\t\t\t\t\t\tInput(Name: recipient_id, Class: form-control hidden, Type: Number, Value: #recipient_id#)\r\n\t\t\t\t\t\tDBFind(Name: supplychains_recipients, Source: src_recipients).Where(id=#recipient_id#).Vars(prefix)\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tInput(Name: recipient_id, Class: form-control hidden, Type: Number, Value: 0)\r\n\t\t\t\t\t\tSetVar(Name: prefix_name, Value: \"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: recipient_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: recipient_name, Class: form-control, Type: text, Value: #prefix_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: recipient_map){\r\n                                    Span(Body: LangRes(map))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tIf(#recipient_id#>0){\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: recipient_map, Type: polygon, MapType: hybrid, Value: #prefix_recipient_map#)\r\n\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: recipient_map, Type: polygon, MapType: hybrid, Value: `{\"zoom\":8, \"center\":{\"lat\":55.749942860682545,\"lng\":37.6207172870636}}`)\r\n\t\t\t\t\t\t\t\t}\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_recipients)\r\n                            Button(Body: LangRes(save), Class: btn btn-primary, Page: supplychains_recipients, Contract: supplychains_recipients_add)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_recipients_view",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    DBFind(Name: supplychains_recipients, Source: src_recipients).Where(\"id=#recipient_id#\").Vars(prefix)\r\n\r\n\tSetTitle($recipient_company_details$: #prefix_name#)\r\n\tDiv(breadcrumb){\r\n\t\tLinkPage($recipient_companies$, supplychains_recipients)\r\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: #prefix_name#)\r\n\t}\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            DBFind(Name: supplychains_supply, Source: src_supply).Where(\"delete=0 and id in (#prefix_string_supply_id#)\").Custom(custom_supplier){\r\n                Span(Class: h5 text-bold, Body: #supplier_name#)\r\n            }.Custom(custom_recipient){\r\n                Span(Class: h5 text-bold, Body: #recipient_name#)\r\n            }.Custom(custom_steps){\r\n                If(#status#>1){ \r\n                    Span(Body: #step# / #total_steps#)\r\n                }.Else{\r\n                    Span(Body: --)\r\n                }\r\n            }.Custom(custom_status){\r\n                If(#status#<1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, 1))\r\n                }.ElseIf(#status#==1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==2){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==3){\r\n                    Div(Class: text-warning, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==4){\r\n                    Div(Class: text-success, Body: EcosysParam(supply_status, #status#))\r\n                }\r\n            }.Custom(custom_date){\r\n                Div(Body: DateTime(DateTime: #date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n                Div(Body: DateTime(DateTime: #date_receipt#, Format: \"DD.MM.YYYY\"))\r\n            }.Custom(custom_delete){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-default)\r\n                }\r\n            }.Order(\"id\")\r\n\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(supply_chain))\t\r\n            }\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=id,$supplier$=custom_supplier,$recipient$=custom_recipient,$cargo$=cargo_name,$dispatch_receipt$=custom_date,$finished_steps$=custom_steps,$status$=custom_status,=custom_delete\")\r\n            }\r\n        }           \r\n    }\t\r\n\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n\t\t\tDBFind(supplychains_cargos, src_cargo).Where(\"delete=0 and recipient_id=#recipient_id#\").Custom(custom_cargo_type){\r\n                Div(Class: text-normal, Body: EcosysParam(supply_cargos, #cargo_type#))\r\n\t\t\t}.Custom(custom_qr){\r\n                Image(Src: \"#qr_code#\").Style(width: 60px; border: 2px solid #5A5D63;)\r\n            }.Custom(custom_edit){\r\n                Div(Class: pull-right){\r\n                    If(EcosysParam(supply_admin_mode)==1){\r\n                        Span(){ \r\n                            Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_cargos_del, Params: \"cargo_id=#id#\", Page: supplychains_recipients_view, PageParams: \"recipient_id=#recipient_id#\").Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                        }.Style(margin-right: 20px;)\r\n                    }\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#id#\", Class: btn btn-default)\r\n                }\r\n\t\t\t}.Order(id)\r\n\t\t\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(cargos))\t\r\n            }\r\n            Div(Class: list-group-item){ \r\n\t\t\t\tTable(Source: src_cargo, Columns: \"$id$=id,$name$=name,$cargo_type$=custom_cargo_type,$weight$=weight,$qr_code$=custom_qr,=custom_edit\")\r\n            }\r\n        }           \r\n    }\t\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_sign",
            "Value": "Div(content-wrapper){\r\n\r\n\tSetTitle($supply_chain$)\r\n    Div(breadcrumb){\r\n        LinkPage($supply_chain$, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n        Span(Class: text-muted, Body: $supply_chain$)\r\n    }\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-2)\r\n        Div(Class: col-md-8){\r\n\t\t\r\n            Div(Class: panel panel-primary){\r\n                Form(){\r\n\t\t\t\t\tInput(Name: cargo_id, Class: form-control hidden, Type: Number, Value: #cargo_id#)\r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply).Where(\"cargo_id = #cargo_id#\").Vars(\"supply\")\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n\t\t\t\t\t\t\tDBFind(supplychains_cargos, src_cargos).Where(\"id=#cargo_id#\").Vars(\"cargo\")\r\n\t\t\t\t\t\t\t\r\n                            Div(Class: col-md-3 mt-sm text-center){\r\n\t\t\t\t\t\t\t\tImage(Src: \"#cargo_qr_code#\").Style(width: 120px;)\r\n                            }\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(supplier):)\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(cargo):)\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(recipient):)\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(date_dispatch):)\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(date_receipt):)\r\n\t\t\t\t\t\t\t\tDiv(Body: LangRes(finished_steps):)\r\n                            } \r\n                            Div(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\tDiv(Body: #supply_supplier_name#)\r\n\t\t\t\t\t\t\t\tDiv(Body: #supply_cargo_name#)\r\n\t\t\t\t\t\t\t\tDiv(Body: #supply_recipient_name#)\r\n\t\t\t\t\t\t\t\tDiv(Body: DateTime(DateTime: #supply_date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n\t\t\t\t\t\t\t\tDiv(Body: DateTime(DateTime: #supply_date_receipt#, Format: \"DD.MM.YYYY\"))\r\n                                Div(Body: #supply_step# / #supply_total_steps#)\r\n                            } \r\n                        }\r\n                    }          \r\n\r\n\t\t\t\t\tDBFind(supplychains_steps, src_pos).Where(\"supply_id=#supply_id# and step=#supply_step#\").Order(\"step\")\r\n                    ForList(src_pos){\r\n\t\t\t\t\t\r\n                        SetVar(hol_id, 0)\r\n                        SetVar(rec_id, 0)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#holder_role_id# and delete=0\").Vars(\"hol\")\r\n\t\t\t\t\t\tDBFind(roles_assign, src_rec).Where(\"role_id=#receiver_role_id# and delete=0\").Vars(\"rec\")\r\n\t\t\t\t\t\t\r\n                        Div(list-group-item) {\r\n                            Div(row df f-valign){\r\n                                Div(col-md-2 m-xs text-center){\r\n                                    Div(h5, #holder_name#)\r\n\t\t\t\t\t\t\t\t\t\r\n                    \t\t\t    If(Or(#holder_signature#>0,#holder_signature#<0)){\r\n                    \t\t\t        Div(h5 m0 text-success, LangRes(supply_successfully_signed))\r\n\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, DateTime(DateTime: #holder_date_signature#, Format: \"DD.MM.YYYY HH:MI\"))\r\n                    \t\t\t    }\t\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-right){\r\n\t\t\t\t\t\t\t\t\tIf(#hol_id#>0){\r\n\t\t\t\t\t\t\t\t\t\tLinkPage(Page: profile_view, PageParams: \"v_member_id=#hol_member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: #hol_member_name#)\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#hol_member_avatar# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#hol_member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-left: 10px;)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n                    \t\t\t   Div(h6 text-muted, EcosysParam(supply_type, #holder_type#))\r\n                                }\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h4 text-normal, Em(Class: fa fa-arrow-right))\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#rec_id#>0){\r\n\t\t\t\t\t\t\t\t\t\tLinkPage(Page: profile_view, PageParams: \"v_member_id=#rec_member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#rec_member_avatar# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#rec_member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: #rec_member_name#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n                    \t\t\t    Div(h6 text-muted, EcosysParam(supply_type,#receiver_type#))\r\n                                }\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5 , #receiver_name# )\r\n\t\t\t\t\t\t\t\t\t\r\n                    \t\t\t    If(Or(#receiver_signature#>0,#receiver_signature#<0)){\r\n                    \t\t\t        Div(h5 m0 text-success, LangRes(supply_successfully_signed))\r\n\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, DateTime(DateTime: #receiver_date_signature#, Format: \"DD.MM.YYYY HH:MI\"))\r\n                    \t\t\t    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_steps, src_steps).Where(\"id = #step_id#\").Vars(\"step\")\r\n\t\t\t\t\tDBFind(roles_assign, src_assign_hol).Where(\"role_id=#step_holder_role_id# and delete=0\").Vars(\"hol\")\r\n\t\t\t\t\tDBFind(roles_assign, src_assign_rec).Where(\"role_id=#step_receiver_role_id# and delete=0\").Vars(\"rec\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tIf(#rec_member_id# == #key_id#){\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tLabel(For: photo){\r\n\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(recipient_photo))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(col-md-5 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tImageInput(Name: photo, Width: 450, Ratio: 2/1)\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\tDiv(col-md-3 mc-sm) \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tIf(Or(And(#hol_member_id#==#key_id#,#step_holder_signature#==0),And(#rec_member_id#==#key_id#,#step_receiver_signature#==0))){\r\n\t\t\t\t\t\tDiv(Class: panel-footer clearfix){\r\n\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\tDBFind(members, src_members).Where(\"id = #key_id#\").Vars(\"prefix\")\r\n\t\t\t\t\t\t\t\tSpan(Body: LangRes(supply_your_signature):).Style(margin-right: 20px;)\r\n\t\t\t\t\t\t\t\tSpan(){\r\n\t\t\t\t\t\t\t\t\tIf(#prefix_avatar# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\tImage(Src: \"#prefix_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: #prefix_member_name#)\r\n\t\t\t\t\t\t\t\t}.Style(margin-right: 20px;)\r\n\t\t\t\t\t\t\t\tIf(And(#hol_member_id#==#key_id#,#step_holder_signature#==0)){\r\n\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_sign, Body: LangRes(supply_handed_over), Params: \"step_id=#step_id#,vFlag=1,notific_id=#notific_id#\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\", Class: btn bg-gray-dark)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tIf(And(#rec_member_id#==#key_id#,#step_receiver_signature#==0)){\r\n\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_sign, Body: LangRes(supply_taken_over), Params: \"step_id=#step_id#,vFlag=2,notific_id=#notific_id#\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\", Class: btn bg-gray-dark)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_suppliers",
            "Value": "Div(content-wrapper ){\r\n\r\n\tSetTitle($suppliers$)\r\n\tDiv(breadcrumb){\r\n\t\tSpan(Class: text-muted, Body: $suppliers$)\r\n\t}\r\n\r\n\tDBFind(supplychains_suppliers, src_suppliers).Custom(custom_name){\r\n        LinkPage(Page: supplychains_suppliers_view, PageParams: \"supplier_id=#id#\"){\r\n\t\t\tSpan(Class: h5 text-bold, Body: #name#)\r\n\t\t}\t\r\n\t}.Custom(custom_type){\r\n\t\tDiv(Class: text-normal, Body: EcosysParam(supply_suppliers, #supplier_type#))\r\n\t}.Custom(custom_map){\r\n        Div(){\r\n\t\t    Map(MapType:hybrid, Hmap:80, Value:#supplier_map#)\r\n        }.Style(width: 150px;)\r\n\t}.Custom(custom_address){\r\n\t\tDiv(Class: text-normal, Body: #address#)\r\n\t}.Custom(custom_edit){\r\n        Div(Class: pull-right){\r\n            If(EcosysParam(supply_admin_mode)==1){ \r\n                Span(){ \r\n                    Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_suppliers_del, Params: \"supplier_id=#id#\", Page: supplychains_suppliers).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                }.Style(margin-right: 20px;)\r\n            }\r\n\t\t\tButton(Class: btn btn-default, Body: Em(Class:fa fa-2x icon-note), Page: supplychains_suppliers_add, PageParams: \"supplier_id=#id#\")\r\n        }\r\n\t}.Where(\"delete=0\").Order(\"id\")\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){ \r\n                Table(Source: src_suppliers, Columns: \"$id$=id,$name$=custom_name,$supplier_type$=custom_type,$map$=custom_map,$address$=custom_address,=custom_edit\")\r\n            }\r\n\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_suppliers_add, Body: LangRes(add), Class: btn btn-primary)\r\n                }\r\n            }\r\n        }           \r\n    }\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_suppliers_add",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_supplier$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($suppliers$, supplychains_suppliers)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_supplier$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(create_supplier))\r\n                Form(){\r\n\r\n\t\t\t\t\tIf(#supplier_id#>0){\r\n\t\t\t\t\t\tInput(Name: supplier_id, Class: form-control hidden, Type: Number, Value: #supplier_id#)\r\n\t\t\t\t\t\tDBFind(Name: supplychains_suppliers, Source: src_suppliers).Where(id=#supplier_id#).Vars(prefix)\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tInput(Name: supplier_id, Class: form-control hidden, Type: Number, Value: 0)\r\n\t\t\t\t\t\tSetVar(Name: prefix_name, Value: \"\")\r\n\t\t\t\t\t\tSetVar(Name: prefix_supplier_type, Value: 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: supplier_name, Class: form-control, Type: text, Value: #prefix_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier_type){\r\n                                    Span(Body: LangRes(supplier_type))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t   EcosysParam(Name: supply_suppliers, Source: src_supplier_type)\r\n\t\t\t\t\t\t\t   Select(Name: supplier_type, Source: src_supplier_type, NameColumn: name, ValueColumn: id, Value: #prefix_supplier_type#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier_map){\r\n                                    Span(Body: LangRes(map))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tIf(#supplier_id#>0){\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: supplier_map, Type: polygon, MapType: hybrid, Value: #prefix_supplier_map#)\r\n\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: supplier_map, Type: polygon, MapType: hybrid, Value: `{\"zoom\":8, \"center\":{\"lat\":55.749942860682545,\"lng\":37.6207172870636}}`)\r\n\t\t\t\t\t\t\t\t}\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_suppliers)\r\n                            Button(Body: LangRes(save), Class: btn btn-primary, Page: supplychains_suppliers, Contract: supplychains_suppliers_add)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_suppliers_view",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    DBFind(Name: supplychains_suppliers, Source: src_suppliers).Where(\"id=#supplier_id#\").Vars(prefix)\r\n\r\n\tSetTitle($supplier_details$: #prefix_name#)\r\n\tDiv(breadcrumb){\r\n\t\tLinkPage($suppliers$, supplychains_suppliers)\r\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: #prefix_name#)\r\n\t}\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n\r\n            DBFind(Name: supplychains_supply, Source: src_supply).Where(\"delete=0 and id in (#prefix_string_supply_id#)\").Custom(custom_supplier){\r\n                Span(Class: h5 text-bold, Body: #supplier_name#)\r\n            }.Custom(custom_recipient){\r\n                Span(Class: h5 text-bold, Body: #recipient_name#)\r\n            }.Custom(custom_steps){\r\n                If(#status#>1){ \r\n                    Span(Body: #step# / #total_steps#)\r\n                }.Else{\r\n                    Span(Body: --)\r\n                }\r\n            }.Custom(custom_status){\r\n                If(#status#<1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, 1))\r\n                }.ElseIf(#status#==1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==2){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==3){\r\n                    Div(Class: text-warning, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==4){\r\n                    Div(Class: text-success, Body: EcosysParam(supply_status, #status#))\r\n                }\r\n            }.Custom(custom_date){\r\n                Div(Body: DateTime(DateTime: #date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n                Div(Body: DateTime(DateTime: #date_receipt#, Format: \"DD.MM.YYYY\"))\r\n            }.Custom(custom_delete){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-default)\r\n                }\r\n            }.Order(\"id\")\r\n\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(supply_chain))\t\r\n            }\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=id,$supplier$=custom_supplier,$recipient$=custom_recipient,$cargo$=cargo_name,$dispatch_receipt$=custom_date,$finished_steps$=custom_steps,$status$=custom_status,=custom_delete\")\r\n            }\r\n\r\n        }           \r\n    }\t\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n\r\n\t\t\tDBFind(supplychains_cargos, src_cargo).Where(\"delete=0 and supplier_id=#supplier_id#\").Custom(custom_cargo_type){\r\n                Div(Class: text-normal, Body: EcosysParam(supply_cargos, #cargo_type#))\r\n\t\t\t}.Custom(custom_qr){\r\n                Image(Src: \"#qr_code#\").Style(width: 60px; border: 2px solid #5A5D63;)\r\n            }.Custom(custom_edit){\r\n                Div(Class: pull-right){\r\n                    If(EcosysParam(supply_admin_mode)==1){\r\n                        Span(){ \r\n                            Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_cargos_del, Params: \"cargo_id=#id#\", Page: supplychains_suppliers_view, PageParams: \"supplier_id=#supplier_id#\").Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                        }.Style(margin-right: 20px;)\r\n                    }\r\n                    Span(){ \r\n                        Button(Class: btn btn-default, Body: Em(Class:fa fa-2x icon-note), Page: supplychains_cargos_add, PageParams: \"supplier_id=#supplier_id#,cargo_id=#id#\")\r\n                    }.Style(margin-right: 20px;)\r\n\t\t\t\t\tButton(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#id#\", Class: btn btn-default)\r\n                }\r\n\t\t\t}.Order(id)\r\n\t\t\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(cargos))\t\r\n            }\r\n            Div(Class: list-group-item){ \r\n\t\t\t\tTable(Source: src_cargo, Columns: \"$id$=id,$name$=name,$cargo_type$=custom_cargo_type,$weight$=weight,$qr_code$=custom_qr,=custom_edit\")\r\n            }\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n\t\t\t\t\tButton(Page: supplychains_cargos_add, Body: LangRes(add), PageParams: \"supplier_id=#supplier_id#,cargo_id=0\", Class: btn btn-primary)\r\n                }\r\n            }\r\n            \r\n        }           \r\n    }\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_transport",
            "Value": "Div(content-wrapper ){\r\n\r\n\tSetTitle($transport_companies$)\r\n\tDiv(breadcrumb){\r\n\t\tSpan(Class: text-muted, Body: $transport_companies$)\r\n\t}\r\n\r\n\tDBFind(supplychains_transport, src_transport).Custom(custom_name){\r\n        LinkPage(Page: supplychains_transport_view, PageParams: \"transport_id=#id#\"){\r\n\t\t\tSpan(Class: h5 text-bold, Body: #name#)\r\n\t\t}\t\t\r\n\t}.Custom(custom_type){\r\n\t\tDiv(Class: text-normal, Body: EcosysParam(supply_transport_company, #type#))\r\n\t}.Custom(custom_edit){\r\n        Div(Class: pull-right){\r\n            If(EcosysParam(supply_admin_mode)==1){\r\n                Span(){ \r\n                    Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_transport_del, Params: \"transport_id=#id#\", Page: supplychains_transport).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                }.Style(margin-right: 20px;)\r\n            }\r\n\t\t\tButton(Class: btn btn-default, Body: Em(Class:fa fa-2x icon-note), Page: supplychains_transport_add, PageParams: \"transport_id=#id#\")\r\n        }\r\n\t}.Where(\"delete=0\").Order(\"id\")\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){ \r\n                Table(Source: src_transport, Columns: \"$id$=id,$name$=custom_name,$type$=custom_type,=custom_edit\")\r\n            }\r\n\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_transport_add, Body: LangRes(add), Class: btn btn-primary)\r\n                }\r\n            }\r\n        }           \r\n    }\t\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_transport_add",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_transport_company$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($transport_companies$, supplychains_transport)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_transport_company$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(create_transport_company))\r\n                Form(){\r\n\r\n\t\t\t\t\tIf(#transport_id#>0){\r\n\t\t\t\t\t\tInput(Name: transport_id, Class: form-control hidden, Type: Number, Value: #transport_id#)\r\n\t\t\t\t\t\tDBFind(Name: supplychains_transport, Source: src_transport).Where(id=#transport_id#).Vars(prefix)\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tInput(Name: transport_id, Class: form-control hidden, Type: Number, Value: 0)\r\n\t\t\t\t\t\tSetVar(Name: prefix_name, Value: \"\")\r\n\t\t\t\t\t\tSetVar(Name: prefix_type, Value: 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: transport_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: transport_name, Class: form-control, Type: text, Value: #prefix_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: type_transport){\r\n                                    Span(Body: LangRes(type))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t   EcosysParam(Name: supply_transport_company, Source: src_transport_company)\r\n\t\t\t\t\t\t\t   Select(Name: type_transport, Source: src_transport_company, NameColumn: name, ValueColumn: id, Value: #prefix_type#)\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_transport)\r\n                            Button(Body: LangRes(save), Class: btn btn-primary, Page: supplychains_transport, Contract: supplychains_transport_add)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_transport_view",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    DBFind(Name: supplychains_transport, Source: src_transport).Where(\"id=#transport_id#\").Vars(prefix)\r\n\r\n\tSetTitle($transport_company_details$: #prefix_name#)\r\n\tDiv(breadcrumb){\r\n\t\tLinkPage($transport_companies$, supplychains_transport)\r\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: #prefix_name#)\r\n\t}\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            DBFind(Name: supplychains_supply, Source: src_supply).Where(\"delete=0 and id in (#prefix_string_supply_id#)\").Custom(custom_supplier){\r\n                Span(Class: h5 text-bold, Body: #supplier_name#)\r\n            }.Custom(custom_recipient){\r\n                Span(Class: h5 text-bold, Body: #recipient_name#)\r\n            }.Custom(custom_steps){\r\n                If(#status#>1){ \r\n                    Span(Body: #step# / #total_steps#)\r\n                }.Else{\r\n                    Span(Body: --)\r\n                }\r\n            }.Custom(custom_status){\r\n                If(#status#<1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, 1))\r\n                }.ElseIf(#status#==1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==2){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==3){\r\n                    Div(Class: text-warning, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==4){\r\n                    Div(Class: text-success, Body: EcosysParam(supply_status, #status#))\r\n                }\r\n            }.Custom(custom_date){\r\n                Div(Body: DateTime(DateTime: #date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n                Div(Body: DateTime(DateTime: #date_receipt#, Format: \"DD.MM.YYYY\"))\r\n            }.Custom(custom_delete){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-default)\r\n                }\r\n            }.Order(\"id\")\r\n\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(supply_chain))\t\r\n            }\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=id,$supplier$=custom_supplier,$recipient$=custom_recipient,$cargo$=cargo_name,$dispatch_receipt$=custom_date,$finished_steps$=custom_steps,$status$=custom_status,=custom_delete\")\r\n            }\r\n        }           \r\n    }\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n\t\t\tDBFind(supplychains_cargos, src_cargo).Where(\"delete=0 and transport_id=#transport_id#\").Custom(custom_cargo_type){\r\n                Div(Class: text-normal, Body: EcosysParam(supply_cargos, #cargo_type#))\r\n\t\t\t}.Custom(custom_qr){\r\n                Image(Src: \"#qr_code#\").Style(width: 60px; border: 2px solid #5A5D63;)\r\n            }.Custom(custom_edit){\r\n                Div(Class: pull-right){\r\n                    If(EcosysParam(supply_admin_mode)==1){\r\n                        Span(){ \r\n                            Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_cargos_del, Params: \"cargo_id=#id#\", Page: supplychains_transport_view, PageParams: \"transport_id=#transport_id#\").Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                        }.Style(margin-right: 20px;)\r\n                    }\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#id#\", Class: btn btn-default)\r\n                }\r\n\t\t\t}.Order(id)\r\n\t\t\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(cargos))\t\r\n            }\r\n            Div(Class: list-group-item){ \r\n\t\t\t\tTable(Source: src_cargo, Columns: \"$id$=id,$name$=name,$cargo_type$=custom_cargo_type,$weight$=weight,$qr_code$=custom_qr,=custom_edit\")\r\n            }\r\n        }           \r\n    }\t\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_view",
            "Value": "Div(content-wrapper){\r\n\r\n\tSetTitle($supply_chain$)\r\n    Div(breadcrumb){\r\n        LinkPage($supply_chain$, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n        Span(Class: text-muted, Body: $supply_chain$)\r\n    }\r\n\t\r\n\tDBFind(supplychains_supply, src_supply).Where(\"cargo_id = #cargo_id#\").Vars(\"supply\")\r\n\t\r\n\tIf(#supply_id# > 0){\r\n\t\tDiv(Class: row df f-valign){\r\n\t\t\tDiv(Class: col-md-2)\r\n\t\t\tDiv(Class: col-md-8){\r\n\t\t\t\r\n\t\t\t\tDiv(Class: panel panel-primary){\r\n\t\t\t\t\tForm(){\r\n\t\t\t\t\t\tInput(Name: cargo_id, Class: form-control hidden, Type: Number, Value: #cargo_id#)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDBFind(supplychains_cargos, src_cargos).Where(\"id=#cargo_id#\").Vars(\"cargo\")\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mt-sm text-center){\r\n\t\t\t\t\t\t\t\t\tImage(Src: \"#cargo_qr_code#\").Style(width: 120px;)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(supplier):)\r\n\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(cargo):)\r\n\t\t\t\t\t\t\t\t\tIf(#supply_step#>-2){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(recipient):)\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(date_dispatch):)\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(date_receipt):)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tIf(#supply_status#>2){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: LangRes(finished_steps):)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tDiv(Body: #supply_supplier_name#)\r\n\t\t\t\t\t\t\t\t\tDiv(Body: #supply_cargo_name#)\r\n\t\t\t\t\t\t\t\t\tIf(#supply_step#>-2){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: #supply_recipient_name#)\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: DateTime(DateTime: #supply_date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: DateTime(DateTime: #supply_date_receipt#, Format: \"DD.MM.YYYY\"))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tIf(#supply_status#>2){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Body: #supply_step# / #supply_total_steps#)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}          \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tDBFind(supplychains_steps, src_pos).Where(\"supply_id=#supply_id#\").Order(\"step\")\r\n\t\t\t\t\t\tForList(src_pos){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tSetVar(hol_id, 0)\r\n\t\t\t\t\t\t\tSetVar(rec_id, 0)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tDBFind(supplychains_steps, src_resource).Where(\"supply_id=#supply_id# and step=#step#\").Vars(\"resource\")\r\n\t\t\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#holder_role_id# and delete=0\").Vars(\"hol\")\r\n\t\t\t\t\t\t\tDBFind(roles_assign, src_rec).Where(\"role_id=#receiver_role_id# and delete=0\").Vars(\"rec\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tDiv(list-group-item) {\r\n\t\t\t\t\t\t\t\tDiv(row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(col-md-2 m-xs text-center){\r\n\t\t\t\t\t\t\t\t\t\tDiv(h5, #holder_name#)\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tIf(Or(#holder_signature#>0,#holder_signature#<0)){\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, LangRes(supply_successfully_signed))\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, DateTime(DateTime: #holder_date_signature#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv( col-md-3 m-xs text-right){\r\n\t\t\t\t\t\t\t\t\t\tIf(#hol_id#>0){\r\n\t\t\t\t\t\t\t\t\t\t\tLinkPage(Page: profile_view, PageParams: \"v_member_id=#hol_member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: #hol_member_name#)\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#hol_member_avatar# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#hol_member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-left: 10px;)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t   Div(h6 text-muted, EcosysParam(supply_type, #holder_type#))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv( col-md-2 m-xs text-center){\r\n\t\t\t\t\t\t\t\t\t\tDiv(h4 text-normal, Em(Class: fa fa-arrow-right))\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tIf(#step_photo#==#step#){\r\n\t\t\t\t\t\t\t\t\t\t\tLinkPage(Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: LangRes(supply_hide))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#resource_photo# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tLinkPage(Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#,step_photo=#step#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: LangRes(supply_photo))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv( col-md-3 m-xs text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#rec_id#>0){\r\n\t\t\t\t\t\t\t\t\t\t\tLinkPage(Page: profile_view, PageParams: \"v_member_id=#rec_member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#rec_member_avatar# != \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#rec_member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5, Body: #rec_member_name#)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tDiv(h6 text-muted, EcosysParam(supply_type,#receiver_type#))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv( col-md-2 m-xs text-center){\r\n\t\t\t\t\t\t\t\t\t\tDiv(h5 , #receiver_name# )\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tIf(Or(#receiver_signature#>0,#receiver_signature#<0)){\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, LangRes(supply_successfully_signed))\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(h5 m0 text-success, DateTime(DateTime: #receiver_date_signature#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tIf(#step_photo#==#step#){\r\n\t\t\t\t\t\t\t\t\tDiv(row df f-valign){\r\n\t\t\t\t\t\t\t\t\t\tDiv(col-md-12 m-xs text-center){\r\n\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#resource_photo#\").Style(width: 450px;)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tIf(#supply_step#==-2){\r\n\t\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(recipient))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mb-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tDBFind(supplychains_recipients, src_recipientsList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\t\tSelect(Source: src_recipientsList, Name: recipient_id, NameColumn: name, ValueColumn: id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(date_dispatch))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mb-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tInput(Name: date_dispatch, Class: form-control, Type: date, Value: Now(\"YYYY-MM-DD\"))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(date_receipt))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tInput(Name: date_receipt, Class: form-control, Type: date, Value: Now(\"YYYY-MM-DD\", 10 days))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tIf(#supply_step#==-1){\r\n\t\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(transport_company))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tDBFind(supplychains_transport, src_transport).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\t\tSelect(Name: transport_id, Source: src_transport, NameColumn: name, ValueColumn: id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tIf(And(#supply_step#>-1,#supply_status#==1)){\r\n\t\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(transport_company))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mb-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: input-group){\r\n\t\t\t\t\t\t\t\t\t\t\tDBFind(supplychains_transport, src_transport).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\t\t\tSelect(Name: transport_id, Source: src_transport, NameColumn: name, ValueColumn: id)\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: input-group-btn){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_step_add, Body: LangRes(next_step), Params: \"cargo_id=#cargo_id#,transport_id=Val(transport_id),warehouse_id=0,param=1\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-primary)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tLabel(){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(warehouse))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-8 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: input-group){\r\n\t\t\t\t\t\t\t\t\t\t\tDBFind(supplychains_warehouses, src_warehouses).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\t\t\tSelect(Name: warehouse_id, Source: src_warehouses, NameColumn: name, ValueColumn: id)\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: input-group-btn){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_step_add, Body: LangRes(next_step), Params: \"cargo_id=#cargo_id#,transport_id=0,warehouse_id=Val(warehouse_id),param=2\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-primary)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tIf(#supply_step#==-2){\r\n\t\t\t\t\t\t\tDiv(Class: panel-footer clearfix){\r\n\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\tButton(Body: LangRes(next_step), Class: btn btn-primary, Contract: supplychains_supply_add_recipient, Params: \"cargo_id=#cargo_id#, recipient_id=Val(recipient_id), date_dispatch=Val(date_dispatch), date_receipt=Val(date_receipt)\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(#supply_step#==-1){\r\n\t\t\t\t\t\t\tDiv(Class: panel-footer clearfix){\r\n\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\tButton(Body: LangRes(next_step), Class: btn btn-primary, Contract: supplychains_supply_add_transport, Params: \"cargo_id=#cargo_id#, transport_id=Val(transport_id)\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(And(#supply_step#>-1,#supply_status#==1)){\r\n\t\t\t\t\t\t\tDiv(Class: panel-footer clearfix){\r\n\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\tButton(Body: LangRes(recipient_point), Class: btn btn-primary, Contract: supplychains_recipient_point, Params: \"cargo_id=#cargo_id#\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(#supply_status#==2){\r\n\t\t\t\t\t\t\tDiv(Class: panel-footer clearfix){\r\n\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\tButton(Body: LangRes(start_supply_chain), Class: btn btn-primary, Contract: supplychains_start, Params: \"cargo_id=#cargo_id#\", Page: supplychains_view, PageParams: \"cargo_id=#cargo_id#\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDiv(Class: col-md-3)\r\n\t\t}\r\n    }.Else{\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(supply_chain_not_created))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_warehouses",
            "Value": "Div(content-wrapper ){\r\n\r\n\tSetTitle($warehouses$)\r\n\tDiv(breadcrumb){\r\n\t\tSpan(Class: text-muted, Body: $warehouses$)\r\n\t}\r\n\r\n\tDBFind(supplychains_warehouses, src_warehouses).Custom(custom_name){\r\n\t\tLinkPage(Page: supplychains_warehouses_view, PageParams: \"warehouse_id=#id#\"){\r\n        \tSpan(Class: h5 text-bold, Body: #name#)\r\n\t\t}\t\t\r\n\t}.Custom(custom_map){\r\n\t\tDiv(){\r\n\t\t\tMap(MapType:hybrid, Hmap:80, Value:#warehouse_map#)\r\n\t\t}.Style(width: 150px;)\r\n\t}.Custom(custom_edit){\r\n        Div(Class: pull-right){\r\n            If(EcosysParam(supply_admin_mode)==1){\r\n                Span(){\r\n                    Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_warehouses_del, Params: \"warehouse_id=#id#\", Page: supplychains_warehouses).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                }.Style(margin-right: 20px;)\r\n            }\r\n\t\t\tButton(Class: btn btn-default, Body: Em(Class:fa fa-2x icon-note), Page: supplychains_warehouses_add, PageParams: \"warehouse_id=#id#\")\r\n        }\r\n\t}.Where(\"delete=0\").Order(\"id\")\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_warehouses, Columns: \"$id$=id,$name$=custom_name,$map$=custom_map,$address$=address,=custom_edit\")\r\n            }\r\n\r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n\t\t\t\t\tButton(Page: supplychains_warehouses_add, Body: LangRes(add), Class: btn btn-primary)\r\n                }\r\n            }\r\n        }           \r\n    }\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_warehouses_add",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    SetTitle($create_warehouse$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($warehouses$, supplychains_warehouses)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_warehouse$)\r\n\t}\r\n\t\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(create_warehouse))\r\n                Form(){\r\n\r\n\t\t\t\t\tIf(#warehouse_id#>0){\r\n\t\t\t\t\t\tInput(Name: warehouse_id, Class: form-control hidden, Type: Number, Value: #warehouse_id#)\r\n\t\t\t\t\t\tDBFind(Name: supplychains_warehouses, Source: src_warehouses).Where(id=#warehouse_id#).Vars(prefix)\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tInput(Name: warehouse_id, Class: form-control hidden, Type: Number, Value: 0)\r\n\t\t\t\t\t\tSetVar(Name: prefix_name, Value: \"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: warehouse_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tInput(Name: warehouse_name, Class: form-control, Type: text, Value: #prefix_name#)\r\n                            } \r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                            Div(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: supplier_map){\r\n                                    Span(Body: LangRes(map))\r\n                                }\r\n                            }\r\n                            Div(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\tIf(#warehouse_id#>0){\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: warehouse_map, Type: polygon, MapType: hybrid, Value: #prefix_warehouse_map#)\r\n\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\tInputMap(Name: warehouse_map, Type: polygon, MapType: hybrid, Value: `{\"zoom\":8, \"center\":{\"lat\":55.749942860682545,\"lng\":37.6207172870636}}`)\r\n\t\t\t\t\t\t\t\t}\r\n                            } \r\n                        }\r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: supplychains_warehouses)\r\n                            Button(Body: LangRes(save), Class: btn btn-primary, Page: supplychains_warehouses, Contract: supplychains_warehouses_add)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        Div(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "supplychains_warehouses_view",
            "Value": "Div(Class: content-wrapper){\r\n\r\n    DBFind(Name: supplychains_warehouses, Source: src_warehouses).Where(\"id=#warehouse_id#\").Vars(prefix)\r\n\r\n\tSetTitle($warehouse_details$: #prefix_name#)\r\n\tDiv(breadcrumb){\r\n\t\tLinkPage($warehouses$, supplychains_warehouses)\r\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: #prefix_name#)\r\n\t}\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            DBFind(Name: supplychains_supply, Source: src_supply).Where(\"delete=0 and id in (#prefix_string_supply_id#)\").Custom(custom_supplier){\r\n                Span(Class: h5 text-bold, Body: #supplier_name#)\r\n            }.Custom(custom_recipient){\r\n                Span(Class: h5 text-bold, Body: #recipient_name#)\r\n            }.Custom(custom_steps){\r\n                If(#status#>1){ \r\n                    Span(Body: #step# / #total_steps#)\r\n                }.Else{\r\n                    Span(Body: --)\r\n                }\r\n            }.Custom(custom_status){\r\n                If(#status#<1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, 1))\r\n                }.ElseIf(#status#==1){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==2){\r\n                    Div(Class: text-normal, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==3){\r\n                    Div(Class: text-warning, Body: EcosysParam(supply_status, #status#))\r\n                }.ElseIf(#status#==4){\r\n                    Div(Class: text-success, Body: EcosysParam(supply_status, #status#))\r\n                }\r\n            }.Custom(custom_date){\r\n                Div(Body: DateTime(DateTime: #date_dispatch#, Format: \"DD.MM.YYYY\"))\r\n                Div(Body: DateTime(DateTime: #date_receipt#, Format: \"DD.MM.YYYY\"))\r\n            }.Custom(custom_delete){\r\n                Div(Class: pull-right){\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#cargo_id#\", Class: btn btn-default)\r\n                }\r\n            }.Order(\"id\")\r\n\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(supply_chain))\t\r\n            }\r\n            Div(Class: list-group-item){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=id,$supplier$=custom_supplier,$recipient$=custom_recipient,$cargo$=cargo_name,$dispatch_receipt$=custom_date,$finished_steps$=custom_steps,$status$=custom_status,=custom_delete\")\r\n            }\r\n        }           \r\n    }\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n\t\t\tDBFind(supplychains_cargos, src_cargo).Where(\"delete=0 and warehouse_id=#warehouse_id#\").Custom(custom_cargo_type){\r\n                Div(Class: text-normal, Body: EcosysParam(supply_cargos, #cargo_type#))\r\n\t\t\t}.Custom(custom_qr){\r\n                Image(Src: \"#qr_code#\").Style(width: 60px; border: 2px solid #5A5D63;)\r\n            }.Custom(custom_edit){\r\n                Div(Class: pull-right){\r\n                    If(EcosysParam(supply_admin_mode)==1){\r\n                        Span(){ \r\n                            Button(Class: btn btn-danger, Body: Em(Class:fa fa-2x fa-close), Contract: supplychains_cargos_del, Params: \"cargo_id=#id#\", Page: supplychains_warehouses_view, PageParams: \"warehouse_id=#warehouse_id#\").Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n                        }.Style(margin-right: 20px;)\r\n                    }\r\n                    Button(Page: supplychains_view, Body: Em(Class: fa-2x icon-eye), PageParams: \"cargo_id=#id#\", Class: btn btn-default)\r\n                }\r\n\t\t\t}.Order(id)\r\n\t\t\r\n            Div(Class: list-group-item text-center){\r\n                Span(Class: h3 text-bold, Body: LangRes(cargos))\t\r\n            }\r\n            Div(Class: list-group-item){ \r\n\t\t\t\tTable(Source: src_cargo, Columns: \"$id$=id,$name$=name,$cargo_type$=custom_cargo_type,$weight$=weight,$qr_code$=custom_qr,=custom_edit\")\r\n            }\r\n        }           \r\n    }\t\t\r\n\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        }
    ],
    "parameters": [
        {
            "Name": "supply_admin_mode",
            "Value": "1",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_cargos",
            "Value": "Container cargo, Liquid bulk, Dry bulk, Breakbulk, Ro-ro",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_company_type",
            "Value": "supplier,stock,transport_company,company_consumer",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_status",
            "Value": "Planning, Expectation, In transit, Finished",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_suppliers",
            "Value": "machine building, armaments, textiles and apparel, petroleum, chemicals, consumer products, food processing, transportation equipment, telecommunications equipment",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_transport_company",
            "Value": "Air,Rail,Road,Water",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_type",
            "Value": "supplier,transport_company,warehouse,recipient",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "tables": [
        {
            "Name": "supplychains_cargos",
            "Columns": "[{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"qr_code\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"cargo_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"weight\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"btn_block\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supplier_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"recipient_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"transport_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"warehouse_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_recipients",
            "Columns": "[{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"recipient_map\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"string_supply_id\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_steps",
            "Columns": "[{\"name\":\"receiver_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_date_signature\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"receiver_date_signature\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"holder_role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_signature\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"step\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supply_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"holder_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"photo\",\"type\":\"bytea\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_signature\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_role_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_suppliers",
            "Columns": "[{\"name\":\"string_supply_id\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supplier_map\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"supplier_type\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_supply",
            "Columns": "[{\"name\":\"recipient_role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"total_steps\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_receipt\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"recipient_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"cargo_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"cargo_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"status\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_dispatch\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"supplier_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"recipient_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"step\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_create\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"supplier_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_transport",
            "Columns": "[{\"name\":\"string_supply_id\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_warehouses",
            "Columns": "[{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"warehouse_map\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"string_supply_id\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ]
}