contract PoaDelete {
    data {
        Id int
    }
    conditions {
        $attorney = DBFind("power_of_attorney").Where({deleted:0, id:$Id}).Row()
        if !$attorney {
            warning "Power of attorney does not exists"
        }
        if !($attorney["address"] == $key_id || $attorney["key_id_attorney"] == $key_id) {
            warning "Deleting Power of attorney is impossible"
        }
    }
    action {
        DBUpdate("power_of_attorney", $Id, {deleted:$time})
    }
}