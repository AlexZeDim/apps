contract ValidatorResign{
    data{}

    conditions{
        $assigned = DBFind("roles_participants").Where({"member->member_id":$key_id, "role->id":3, "role->name":"Validator", deleted:0}).Columns("id,member->member_id,role->id,role->name,deleted").One("id")
        if !$assigned {
            warning "You are not a validator"
        }
    }

    action{
        RolesUnassign("row_id", Int($assigned))
        NodeRemoveByKey()
    }
}