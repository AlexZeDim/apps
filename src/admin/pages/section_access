DBFind(sections).WhereId(#id#).Vars(section)
Div(content-wrapper){
	SetTitle("Access Rights")
	Div(Class: breadcrumb){
		LinkPage("Sections", section_list)
		Span(/).Style(margin-right: 10px; margin-left: 10px;)
		Span(Class: text-muted, Body: #section_title#)
	}
	Form(){
		Div(form-group){
			Label("Roles access")
			      DBFind(roles,src_roles).Where({deleted:0}).Columns("id,role_name").Order(id)
            Data(form, "Name,Res,Type,Src,Val"){
                role_name,name,text,,#role_name#
                roles_types,type,app_param,,#rid_role_type#
                roles_managers,roles_managers,rids,src_roles,
            }
            Div(input-group mb-sm){
                Select(Name:#Name#, Source:src_roles, NameColumn:role_name, ValueColumn: id)
                Div(input-group-btn){
                    Button(Class: btn btn-primary fa fa-plus, Page: section_edit, PageParams:"id=#id#", Contract:SectionAccessRoles, Params:"rid=#rid#,id=#id#,operation=add")
                }
            }
            DBFind("sections").Where({"id":#id#}).Columns("roles_access->rids").Vars(json)
            DBFind(roles,src_roles_access).Where({id:{"$in":[#json_roles_access_rids#]}}).Columns("id,role_name").Order(role_name)
            ForList(src_roles_access){
                If(#id#==#role_id#){
                    Button(Class: btn btn-info mr-sm mb-sm, Page: roles_create, PageParams:"rid=#rid#", Contract: SectionAccessRoles, Params:"rid=#rid#,id=#id#,operation=remove", Body: Span(Class: fa fa-remove) #role_name#)
                }.Else{
                    Button(Class: btn btn-default mr-sm mb-sm, Page: roles_create, PageParams:"rid=#rid#", Contract: SectionAccessRoles, Params:"rid=#rid#,id=#id#,operation=emove", Body: Span(Class: fa fa-remove) #role_name#)
                }
			}
		}
	}
}
