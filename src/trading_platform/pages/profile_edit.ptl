Div(content-wrapper){
    SetTitle($editing_profile$)
    Div(breadcrumb){
        LinkPage($user_info$, profile_view)
        Span(/).Style(margin-right: 10px; margin-left: 10px;)
        Span(Class: text-muted, Body: $editing_profile$)
    }
    
    If(Or(#v_member_id#>0,#v_member_id#<0)){
        DBFind(Name: members, Source: src_member).Columns("id,member_name,image_id,member_info->information").Where("id=#v_member_id#").Vars(prefix)
    }.Else{
        DBFind(Name: members, Source: src_member).Columns("id,member_name,image_id,member_info->information").Where("id=#key_id#").Vars(prefix)
    }
    
    Div(row){
        Div(col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3){
            Form(panel panel-primary){
                Div(panel-heading, Body: LangRes(editing_profile))
                Div(panel-body){
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: name_first){
                                    Span(Body: LangRes(name_first))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: name_first).Validate(minLength:3, maxLength:60)
                                InputErr(Name: name_first, minLength: $validate_name_first$, maxLength: $validate_name_first$)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: name_middle){
                                    Span(Body: LangRes(name_middle))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: name_middle).Validate(minLength:3, maxLength:60)
                                InputErr(Name: name_middle, minLength: $validate_name_middle$, maxLength: $validate_name_middle$)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: name_last){
                                    Span(Body: LangRes(name_last))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: name_last).Validate(minLength:3, maxLength:60)
                                InputErr(Name: name_last, minLength: $validate_name_last$, maxLength: $validate_name_last$)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: company_name){
                                    Span(Body: LangRes(company))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: company_name).Validate(minLength:3, maxLength:60)
                                InputErr(Name: company_name, minLength: $validate_company_name$, maxLength: $validate_company_name$)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: company_position){
                                    Span(Body: LangRes(company_position))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: company_position).Validate(minLength:3, maxLength:60)
                                InputErr(Name: company_position, minLength: $validate_company_position$, maxLength: $validate_company_position$)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: member_name){
                                    Span(Body: LangRes(member_name))
                                    Span(Class: text-danger, Body:*)
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                If(Or(#prefix_id#>0,#prefix_id#<0)){
                                    Input(Name: member_name, Value: #prefix_member_name#, Disabled: true)
                                }.Else{
                                    Input(Name: member_name).Validate(minLength:5, maxLength:20)
                                    InputErr(Name: member_name, minLength: $validate_member_name$, maxLength: $validate_member_name$)
                                }
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-sm text-right){
                                Label(For: member_image){
                                    Span(Body: LangRes(member_image))
                                    If(Or(#prefix_id#>0,#prefix_id#<0)){
                                    }.Else{
                                        Span(Class: text-danger, Body:*)
                                    }
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                Input(Name: member_image, Type: file)
                            }
                        }
                    }
                    Div(list-group-item){
                        Div(row){
                            Div(col-md-3 mt-lg text-right){
                                Label(For: information){
                                    Span(Body: LangRes(information))
                                }
                            }
                            Div(col-md-9 mc-sm text-left){
                                If(GetVar(prefix_member_info_information)){
                                    Input(Name: information, Type: textarea, Value: #prefix_member_info_information#)
                                }.Else{
                                    Input(Name: information, Type: textarea)
                                }
                            }
                        }
                    }
                }
                Div(panel-footer text-right){
                    Button(Body: LangRes(save), Class: btn btn-primary, Contract: Profile_Edit, Page: members_list, Params: "member_id=#key_id#").Alert(Text: $want_save_changes$, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)
                }
            }
        }
    }
}