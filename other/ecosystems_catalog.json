{
    "name": "Ecosystems catalog",
    "conditions": "ContractConditions(\"@1DeveloperCondition\")",
    "data": [
        {
            "Name": "default_menu",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "MenuItem(Title:$@1catalog_ecosystems$, Page:@1ecosystems_catalog_list, Icon:\"icon-folder\")",
            "Type": "menu"
        },
        {
            "Name": "ecosystems_catalog_payment",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1apl_not_required,@1apl_required",
            "Type": "app_params"
        },
        {
            "Name": "ecosystems_catalog_type",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1public_org,@1business,@1finance",
            "Type": "app_params"
        },
        {
            "Name": "ecosystems_catalog_visibility",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1hide,@1show",
            "Type": "app_params"
        },
        {
            "Name": "ecosystems_catalog_list",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "SetVar(this_page, @1ecosystems_catalog_list).(this_table, @1ecosystems)\r\nInclude(@1pager_header)\r\n\r\nSetTitle(\"$@1catalog_ecosystems$\")\r\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1catalog_ecosystems_desc$\"))\r\nAddToolButton(Title: $@1add$, Page: @1ecosystems_catalog_manage, Icon: \"icon-plus\").Popup(Header: $@1catalog_ecosystems_adding$, Width: \"50\")\r\n\r\nIf(GetVar(sort)){\r\n    If(#sort#==1){\r\n        SetVar(payment_filter, {\"info->payment\":1}).(p1_class, \"bg-gray-lighter\").(p2_class, \"bg-gray\")\r\n    }.ElseIf(#sort#==2){\r\n        SetVar(payment_filter, {\"info->payment\":2}).(p1_class, \"bg-gray\").(p2_class, \"bg-gray-lighter\")\r\n    }\r\n}.Else{\r\n    SetVar(sort, \"0\").(p1_class, \"bg-gray\").(p2_class, \"bg-gray\")\r\n}\r\n\r\nIf(GetVar(page_par)){\r\n    If(#page_par#==1){\r\n        SetVar(type_filter, {\"info->type\":1}).(t1_class, \"bg-gray-lighter\").(t2_class, \"bg-gray\").(t3_class, \"bg-gray\")\r\n    }.ElseIf(#page_par#==2){\r\n        SetVar(type_filter, {\"info->type\":2}).(t1_class, \"bg-gray\").(t2_class, \"bg-gray-lighter\").(t3_class, \"bg-gray\")\r\n    }.ElseIf(#page_par#==3){\r\n        SetVar(type_filter, {\"info->type\":3}).(t1_class, \"bg-gray\").(t2_class, \"bg-gray\").(t3_class, \"bg-gray-lighter\")\r\n    }\r\n}.Else{\r\n    SetVar(page_par, \"0\").(t1_class, \"bg-gray\").(t2_class, \"bg-gray\").(t3_class, \"bg-gray\")\r\n}\r\n\r\nDiv(btn-group ml-lg){\r\n    If(And(#sort#==0,#page_par#==0)){\r\n        Button(Body: $@1all$, Page: #this_page#, PageParams: \"sort=0,page_par=0\", Class: btn bg-gray-lighter ml-sm mr-lg)\r\n    }.Else{\r\n        Button(Body: $@1all$, Page: #this_page#, PageParams: \"sort=0,page_par=0\", Class: btn bg-gray ml-sm mr-lg)\r\n    }\r\n\r\n    Button(Body: Em(Class: fa fa-gift) $@1apl_not_required$, Page: #this_page#, PageParams: \"sort=1,page_par=#page_par#\", Class: btn #p1_class# ml-sm)\r\n    Button(Body: Em(Class: fa fa-usd) $@1apl_required$, Page: #this_page#, PageParams: \"sort=2,page_par=#page_par#\", Class: btn #p2_class# ml-sm mr-lg)\r\n    Button(Body: Em(Class: fa fa-users) $@1public_org$, Page: #this_page#, PageParams: \"sort=#sort#,page_par=1\", Class: btn #t1_class# ml-sm)\r\n    Button(Body: Em(Class: fa fa-handshake-o) $@1business$, Page: #this_page#, PageParams: \"sort=#sort#,page_par=2\", Class: btn #t2_class# ml-sm)\r\n    Button(Body: Em(Class: fa fa-bank) $@1finance$, Page: #this_page#, PageParams: \"sort=#sort#,page_par=3\", Class: btn #t3_class# ml-sm)\r\n}\r\n\r\nIf(GetVar(search)!=\"\"){\r\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter), {\"name\": {$like:#search#}}]})\r\n}.Else{\r\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter)]}).(search,)\r\n}\r\n\r\nDiv(list-group-item ml-lg mr-lg pt-lg){\r\n    SetVar(search_name, LangRes(@1ecosystem))\r\n    Include(@1search)\r\n}\r\n\r\nDBFind(@1applications).Where({ecosystem:1, name:\"Basic\"}).Columns(\"name,id\").Vars(basic_application)\r\nSetVar(template_id, AppParam(Ecosystem:1, App:#basic_application_id#, Name: voting_ves_template_id))\r\n\r\nDBFind(#this_table#, src).Where(#where#).Order({\"id\": 1}).Limit(#pager_limit#).Offset(#pager_offset#).Columns(\"id,name,info->type,info->payment,is_valued\").Custom(_id){\r\n    Span(#id#)\r\n}.Custom(_name){\r\n    Button(Class: btn btn-link ph0, Page: @1ecosystems_catalog_preview, PageParams: \"view_page_id=#id#,sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\"){\r\n        If(#info.payment#==1){\r\n            Em(Class: fa fa-lg fa-gift fa-fw)\r\n        }.ElseIf(#info.payment#==2){\r\n            Em(Class: fa fa-lg fa-usd fa-fw)\r\n        }\r\n        If(#info.type#==1){\r\n            Em(Class: fa fa-lg fa-users fa-fw mr)\r\n        }.ElseIf(#info.type#==2){\r\n            Em(Class: fa fa-lg fa-handshake-o fa-fw mr)\r\n        }.ElseIf(#info.type#==3){\r\n            Em(Class: fa fa-lg fa-bank fa-fw mr)\r\n        }\r\n        Span(#name#)\r\n    }.Popup(Header: $@1catalog_ecosystems_preview$, Width: \"40\")\r\n}.Custom(_valued){\r\n    If(#template_id#>0){\r\n        If(#is_valued#==0){\r\n            Button(Body: $@1start_voting_ves$, Class: btn-xs btn-link, Page: @1voting_list, Contract: @1VotingVesCreate, Params: \"RowId=#id#\")\r\n        }\r\n    }.ElseIf(#is_valued#==1){\r\n        $@1is_valued$\r\n    }\r\n}.Custom(_actions){\r\n    SetVar(ecosystem_member_id,)\r\n    DBFind(@1notifications).Where({\"ecosystem\": #id#, \"sender->member_id\": #key_id#, \"page_params->ecosystem_id\": #id#, closed:0}).Count(notific_count)\r\n    DBFind(@1keys).Where({\"ecosystem\": #id#, \"id\": #key_id#}).Vars(ecosystem_member)\r\n    DBFind(@1parameters).Where({\"$and\": [{\"ecosystem\": #id#}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": #key_id#}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": #key_id#}]}]}]}).Count(access)\r\n    Div(text-right button-group text-nowrap){\r\n        If(GetVar(access)){\r\n            Button(Class: fa fa-edit btn btn-default mh-sm, Page: @1ecosystems_catalog_manage, PageParams: \"edit_page_id=#id#\").Popup(Header: $@1catalog_ecosystems_editing$, Width: \"50\")\r\n        }.ElseIf(And(#notific_count#==0,#ecosystem_member_id#==\"\")){\r\n            Button(Class: btn btn-link, Body: $@1send_request$, Contract: @1MembershipRequest, Page: #this_page#, Params: \"ecosystem_num=#id#\")\r\n        }\r\n    }\r\n}.Count(count)\r\n\r\nDiv(fullscreen){\r\n    Div(table-responsive ml-lg mr-lg){\r\n        Div(list-group-item){\r\n            If(#count# > 0){\r\n                Table(src, \"$@1id$=_id,$@1ecosystem$=_name,$@1valued$=_valued,=_actions\")\r\n            }.Else{\r\n                Div(Class: text-center h4 text-muted, Body: \"$@1ecosystems$ $@1not_founded$\")\r\n            }                       \r\n        }.Style(\r\n            margin-top:-15px;\r\n            tbody > tr:nth-of-type(odd) {\r\n                background-color: #f8f9fc;\r\n            }\r\n        )\r\n    }\r\n}\r\nDiv(mt-sm ml-lg mr-sm mb-sm){\r\n    Include(@1pager)\r\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ecosystems_catalog_manage",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\nIf(GetVar(SelectedId)==\"\"){\r\n    SetVar(SelectedId,#ecosystem_id#)\r\n}\r\nDBFind(@1buffer_data).Columns(\"value->id,value->visibility,value->type,value->payment,value->description,value->logo,value->switch,value->conditions,value->hardware,value->email,value->phone,value->vde_page,value->vde_form,value->web_page,value->web_form\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_catalog_manage_form\", \"member_id\": #key_id#}).Vars(buffer)\r\nIf(And(#buffered#==1,#buffer_value_id#>1)){\r\n    SetVar(edit_page_id,#buffer_value_id#)\r\n}\r\nIf(GetVar(edit_page_id)){\r\n    DBFind(@1ecosystems).Where({\"id\": #edit_page_id#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(edit)\r\n}.Else{\r\n    DBFind(@1ecosystems).Where({\"id\": #SelectedId#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(edit)\r\n}\r\nIf(#buffered#==1){\r\n    SetVar(edit_info_visibility,#buffer_value_visibility#)\r\n    SetVar(edit_info_type,#buffer_value_type#)\r\n    SetVar(edit_info_payment,#buffer_value_payment#)\r\n    SetVar(edit_info_description,#buffer_value_description#)\r\n}\r\nIf(#uploaded#==1){\r\n    DBFind(@1buffer_data).Columns(\"value->binary_id\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_logo\", \"member_id\": #key_id#}).Vars(logo)\r\n    SetVar(edit_info_logo,#logo_value_binary_id#)\r\n}.ElseIf(#buffered#==1){\r\n    SetVar(edit_info_logo,#buffer_value_logo#)\r\n}\r\nIf(And(#buffered#==1,#buffer_value_switch#==\"true\")){\r\n    SetVar(edit_info_conditions,#buffer_value_conditions#)\r\n    SetVar(edit_info_hardware,#buffer_value_hardware#)\r\n    SetVar(edit_info_email,#buffer_value_email#)\r\n    SetVar(edit_info_phone,#buffer_value_phone#)\r\n    SetVar(edit_info_vde_page,#buffer_value_vde_page#)\r\n    SetVar(edit_info_vde_form,#buffer_value_vde_form#)\r\n    SetVar(edit_info_web_page,#buffer_value_web_page#)\r\n    SetVar(edit_info_web_form,#buffer_value_web_form#)\r\n}\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ecosystems_catalog_visibility, Source: src_visibility)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ecosystems_catalog_type, Source: src_type)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ecosystems_catalog_payment, Source: src_payment)\r\n\r\nForm(){\r\n    Div(row){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1ecosystem)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            Input(Name: Id, Type: hidden, Value: #edit_id#)\r\n            If(GetVar(edit_page_id)){\r\n                SetVar(back_page_popup_header, $@1catalog_ecosystems_editing$)\r\n                Input(Name: Name, Value: #edit_name#, Disabled: true)\r\n            }.Else{\r\n                SetVar(back_page_popup_header, $@1catalog_ecosystems_adding$)\r\n                Div(input-group){\r\n                    If(#edit_id#==1){\r\n                        Input(Name: Name, Value: $@1ecosystem_select$, Disabled: true)\r\n                    }.Else{\r\n                        Input(Name: Name, Value: #edit_name#, Disabled: true)\r\n                    }\r\n                    Div(input-group-btn){\r\n                        Button(Body: LangRes(@1select), Page: @1select_page, PageParams: \"Type=ecosystem_catalog,Header=#back_page_popup_header#,back_page=@1ecosystems_catalog_manage\", Class:btn btn-primary).Popup(Header: $@1ecosystem$, Width: \"40\")\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_visibility)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_visibility)){\r\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id, Value: #edit_info_visibility#)\r\n            }.Else{\r\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_type)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_type)){\r\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id, Value: #edit_info_type#)\r\n            }.Else{\r\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_payment)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_payment)){\r\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id, Value: #edit_info_payment#)\r\n            }.Else{\r\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_description)\r\n            }\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_description)){\r\n                Input(Name: Description, Type: textarea, Class: rv, Value: #edit_info_description#)\r\n            }.Else{\r\n                Input(Name: Description, Type: textarea, Class: rv)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 text-right){\r\n            Span(Class: text-bold vc){\r\n                LangRes(@1catalog_ecosystems_logo)\r\n            }\r\n        }\r\n        Div(ml-lg pull-left){\r\n            If(#edit_id#!=1){\r\n                SetVar(ParamNames, \"id;visibility;type;payment;description;logo;switch;conditions;hardware;email;phone;vde_page;vde_form;web_page;web_form\")\r\n                Button(Class: btn btn-link p0, Page: @1upload_page, PageParams: \"back_page=@1ecosystems_catalog_manage,back_page_popup=50,back_page_popup_header=#back_page_popup_header#,app_id=#application_id#,buffer_key=ecosystem_logo\", Contract: @1FormStateSave, Params: \"AppId=#application_id#,FormName=ecosystem_catalog_manage_form,ParamNames=#ParamNames#,Param1=Val(Id),Param2=Val(Visibility),Param3=Val(Type),Param4=Val(Payment),Param5=Val(Description),Param6=Val(Logo),Param7=Val(Switch),Param8=Val(Conditions),Param9=Val(Hardware),Param10=Val(Email),Param11=Val(Phone),Param12=Val(Vde_page),Param13=Val(Vde_form),Param14=Val(Web_page),Param15=Val(Web_form)\"){\r\n                    If(#edit_info_logo#>0){\r\n                        Input(Name: Logo, Type: hidden, Value: #edit_info_logo#)\r\n                        Image(Src: Binary().ById(#edit_info_logo#)).Style(height: 36px;)\r\n                    }.Else{\r\n                        Input(Name: Logo, Type: hidden, Value: 0)\r\n                        Span(Class: fa icon-layers fa-2x vc)\r\n                    }\r\n                }.Popup(Header: $@1catalog_ecosystems_logo$, Width: 30)\r\n            }.Else{\r\n                Span(Class: fa icon-layers fa-2x vc)\r\n            }\r\n        }\r\n        Div(ml-xl pull-left){\r\n            Span(Class: mr text-bold vc){\r\n                LangRes(@1additional_info_edit)\r\n            }\r\n            If(And(#buffered#==1,#buffer_value_switch#==\"true\")){\r\n                Input(Name: Switch, Type: \"checkbox\", Value: \"true\", Class: m0).Style(display: inline-block;)\r\n            }.Else{\r\n                Input(Name: Switch, Type: \"checkbox\", Value: \"false\", Class: m0).Style(display: inline-block;)\r\n            }\r\n        }\r\n    }.Style(.vc{line-height: 36px;})\r\n    Div(){\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_conditions)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_conditions)){\r\n                    Input(Name: Conditions, Type: textarea, Class: rv, Value: #edit_info_conditions#)\r\n                }.Else{\r\n                    Input(Name: Conditions, Type: textarea, Class: rv)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_hardware)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_hardware)){\r\n                    Input(Name: Hardware, Type: textarea, Class: rv, Value: #edit_info_hardware#)\r\n                }.Else{\r\n                    Input(Name: Hardware, Type: textarea, Class: rv)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_email)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_email)){\r\n                    Input(Name: Email, Value: #edit_info_email#)\r\n                }.Else{\r\n                    Input(Name: Email)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_phone)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_phone)){\r\n                    Input(Name: Phone, Value: #edit_info_phone#)\r\n                }.Else{\r\n                    Input(Name: Phone)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1vde_page_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_vde_page)){\r\n                    Input(Name: Vde_page, Value: #edit_info_vde_page#)\r\n                }.Else{\r\n                    Input(Name: Vde_page)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1vde_form_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_vde_form)){\r\n                    Input(Name: Vde_form, Value: #edit_info_vde_form#)\r\n                }.Else{\r\n                    Input(Name: Vde_form)\r\n                }\r\n                Div(Class: m0 h6 text-muted, Body: $@1vde_form_desc$)\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1web_page_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_web_page)){\r\n                    Input(Name: Web_page, Value: #edit_info_web_page#)\r\n                }.Else{\r\n                    Input(Name: Web_page)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1web_form_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_web_form)){\r\n                    Input(Name: Web_form, Value: #edit_info_web_form#)\r\n                }.Else{\r\n                    Input(Name: Web_form)\r\n                }\r\n                Div(Class: m0 h6 text-muted, Body: $@1web_form_desc$)\r\n            }\r\n        }\r\n    }.Show(\"Switch=true\")\r\n    \r\n    If(#edit_id#==1){\r\n        Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-sm disabled)\r\n    }.Else{\r\n        Div(){\r\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-sm, Contract: @1EcosystemsCatalogManageInfo, Page: @1ecosystems_catalog_list)\r\n        }.Show(\"Switch=true\")\r\n        Div(){\r\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-sm, Contract: @1EcosystemsCatalogManageInfo, Params:\"Conditions=#edit_info_conditions#,Email=#edit_info_email#,Phone=#edit_info_phone#,Hardware=#edit_info_hardware#,Vde_page=#edit_info_vde_page#,Vde_form=#edit_info_vde_form#,Web_page=#edit_info_web_page#,Web_form=#edit_info_web_form#\", Page: @1ecosystems_catalog_list)\r\n        }.Show(\"Switch=false\")\r\n    }\r\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt-sm, Page: @1ecosystems_catalog_list)\r\n}.Style(\r\n    .rv {resize: vertical;}\r\n)",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ecosystems_catalog_preview",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\nDBFind(@1ecosystems).Where({\"id\": #view_page_id#}).Columns(\"id,name,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(preview)\r\nForm(){\r\n    If(#view_page_id#>0){\r\n        Div(row text-center){\r\n            If(#preview_info_logo#>0){\r\n                Image(Src: Binary().ById(#preview_info_logo#)).Style(height: 70px;)\r\n            }.Else{\r\n                Span(Class: fa icon-layers fa-5x text-primary)\r\n            }\r\n        }\r\n        Div(row){\r\n            Div(col-sm-12 text-center){\r\n                Span(Class: text-bold h4, Body: #preview_name#)\r\n            }\r\n        }\r\n        Div(row){\r\n            Div(col-sm-12 text-center h4){\r\n                If(#preview_info_type#!=\"\"){\r\n                    Span(Class: label label-default label-dark mr-sm){\r\n                        If(#preview_info_type#==1){\r\n                            Em(Class: fa fa-users mr-sm)\r\n                        }.ElseIf(#preview_info_type#==2){\r\n                            Em(Class: fa fa-handshake-o mr-sm)\r\n                        }.ElseIf(#preview_info_type#==3){\r\n                            Em(Class: fa fa-bank mr-sm)\r\n                        }\r\n                        AppParam(Ecosystem: 1, App: #application_id#, Name: ecosystems_catalog_type, Index: #preview_info_type#)\r\n                    }\r\n                }\r\n                If(#preview_info_payment#!=\"\"){\r\n                    Span(Class: label label-default label-dark){\r\n                        If(#preview_info_payment#==1){\r\n                            Em(Class: fa fa-gift mr-sm)\r\n                        }.ElseIf(#preview_info_payment#==2){\r\n                            Em(Class: fa fa-usd mr-sm)\r\n                        }\r\n                        AppParam(Ecosystem: 1, App: #application_id#, Name: ecosystems_catalog_payment, Index: #preview_info_payment#)\r\n                    }\r\n                }\r\n            }.Style(\r\n                .label-dark{\r\n                    color:#515253;\r\n                    font-weight: normal;\r\n                }\r\n            )\r\n        }\r\n        If(#preview_info_description#!=\"\"){\r\n            Div(list-group-item mt-sm){\r\n                Div(row mt-sm){\r\n                    Div(col-sm-4 text-right){\r\n                        Label(){\r\n                            LangRes(@1catalog_ecosystems_description)\r\n                        }\r\n                    }\r\n                    Div(col-sm-8){\r\n                        Span(Body: #preview_info_description#)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        If(Or(#preview_info_conditions#!=\"\",#preview_info_hardware#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_conditions#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_conditions)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_conditions#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_hardware#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_hardware)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_hardware#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        If(Or(#preview_info_email#!=\"\",#preview_info_phone#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_email#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_email)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_email#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_phone#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_phone)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_phone#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        If(Or(#preview_info_vde_page#!=\"\",#preview_info_vde_form#!=\"\",#preview_info_web_page#!=\"\",#preview_info_web_form#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_vde_page#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1vde_page_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_vde_page#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_vde_form#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1vde_form_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_vde_form#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_web_page#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1web_page_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_web_page#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_web_form#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1web_form_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_web_form#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    If(GetVar(search)==\"\"){\r\n        SetVar(search,)\r\n    }\r\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt, Page: @1ecosystems_catalog_list, PageParams: \"sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\")\r\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "EcosystemsCatalogManageInfo",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "contract EcosystemsCatalogManageInfo {\r\n    data {\r\n        Id int\r\n        Visibility int\r\n        Type int\r\n        Payment int\r\n        Logo int \"optional\"\r\n        Description string \"optional\"\r\n        Conditions string \"optional\"\r\n        Email string \"optional\"\r\n        Phone string \"optional\"\r\n        Hardware string \"optional\"\r\n        Vde_page string \"optional\"\r\n        Vde_form string \"optional\"\r\n        Web_page string \"optional\"\r\n        Web_form string \"optional\"\r\n    }\r\n    \r\n    conditions {\r\n        var access map\r\n        access = DBFind(\"@1parameters\").Where({\"$and\": [{\"ecosystem\": $Id}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": $key_id}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": $key_id}]}]}]}).Row()\r\n        if !access {\r\n            warning LangRes(\"@1ecosystem_cannot_manage_info\", \"en\")\r\n        }\r\n    }\r\n\r\n    action {\r\n        var ecosystem_info map\r\n        ecosystem_info[\"visibility\"] = $Visibility\r\n        ecosystem_info[\"type\"] = $Type\r\n        ecosystem_info[\"payment\"] = $Payment\r\n        ecosystem_info[\"logo\"] = $Logo\r\n        ecosystem_info[\"description\"] = $Description\r\n        ecosystem_info[\"conditions\"] = $Conditions\r\n        ecosystem_info[\"email\"] = $Email\r\n        ecosystem_info[\"phone\"] = $Phone\r\n        ecosystem_info[\"hardware\"] = $Hardware\r\n        ecosystem_info[\"vde_page\"] = $Vde_page\r\n        ecosystem_info[\"vde_form\"] = $Vde_form\r\n        ecosystem_info[\"web_page\"] = $Web_page\r\n        ecosystem_info[\"web_form\"] = $Web_form\r\n        DBUpdate(\"@1ecosystems\", $Id, {\"info\": ecosystem_info})\r\n    }\r\n}",
            "Type": "contracts"
        }
    ]
}